<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Think Data – CASA/MNIT Workshop</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="..//img/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-0812a7d3ff627bcd45a5ce7d509146a1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-2fcf7bc05617db2f5f20cf7ec168f362.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<meta property="og:title" content="Think Data – CASA/MNIT Workshop">
<meta property="og:description" content="An Introduction to Lists and Dictionaries">
<meta property="og:image" content="./img/completely_different.png">
<meta property="og:site_name" content="Introduction to Spatial Data Science">
<meta property="og:locale" content="en_GB">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-md " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../img/CASA_Logo_no_text.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">CASA/MNIT Workshop</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Welcome</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-setup" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Setup</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-setup">    
        <li>
    <a class="dropdown-item" href="../setup/health.html">
 <span class="dropdown-text">Requirements</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../setup/base.html">
 <span class="dropdown-text">Updates</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../setup/env.html">
 <span class="dropdown-text">Installation</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sessions" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Sessions</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sessions">    
        <li>
    <a class="dropdown-item" href="../setup/code_camp.html">
 <span class="dropdown-text">Code Camp</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/day1.html">
 <span class="dropdown-text">Day 1: Getting Started</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/day2.html">
 <span class="dropdown-text">Day 2: Exploring Code</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/day3.html">
 <span class="dropdown-text">Day 3: Reproducible Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../sessions/day4.html">
 <span class="dropdown-text">Day 4: Visualising Data</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul class="collapse">
  <li><a href="#tackling-programming-problems" id="toc-tackling-programming-problems" class="nav-link active" data-scroll-target="#tackling-programming-problems">Tackling Programming Problems</a>
  <ul class="collapse">
  <li><a href="#reading-a-remote-file" id="toc-reading-a-remote-file" class="nav-link" data-scroll-target="#reading-a-remote-file">Reading a Remote File</a></li>
  <li><a href="#text-into-data" id="toc-text-into-data" class="nav-link" data-scroll-target="#text-into-data">Text into Data</a></li>
  <li><a href="#the-advantages-of-a-package" id="toc-the-advantages-of-a-package" class="nav-link" data-scroll-target="#the-advantages-of-a-package">The Advantages of a Package</a></li>
  <li><a href="#insight" id="toc-insight" class="nav-link" data-scroll-target="#insight">Insight!</a></li>
  </ul></li>
  <li><a href="#why-obvious-is-not-always-right" id="toc-why-obvious-is-not-always-right" class="nav-link" data-scroll-target="#why-obvious-is-not-always-right">Why ‘Obvious’ is Not Always ‘Right’</a>
  <ul class="collapse">
  <li><a href="#understanding-whats-an-appropriate-data-structure" id="toc-understanding-whats-an-appropriate-data-structure" class="nav-link" data-scroll-target="#understanding-whats-an-appropriate-data-structure">Understanding What’s an ‘Appropriate’ Data Structure</a></li>
  <li><a href="#brain-teaser" id="toc-brain-teaser" class="nav-link" data-scroll-target="#brain-teaser">Brain Teaser</a></li>
  <li><a href="#bringing-it-all-together" id="toc-bringing-it-all-together" class="nav-link" data-scroll-target="#bringing-it-all-together">Bringing it all together…</a></li>
  </ul></li>
  <li><a href="#why-obvious-is-not-always-right-revisited" id="toc-why-obvious-is-not-always-right-revisited" class="nav-link" data-scroll-target="#why-obvious-is-not-always-right-revisited">Why ‘Obvious’ is Not Always ‘Right’ (Revisited)</a>
  <ul class="collapse">
  <li><a href="#the-way-that-doesnt-work" id="toc-the-way-that-doesnt-work" class="nav-link" data-scroll-target="#the-way-that-doesnt-work">The Way That Doesn’t Work</a></li>
  <li><a href="#the-way-that-does-work" id="toc-the-way-that-does-work" class="nav-link" data-scroll-target="#the-way-that-does-work">The Way That Does Work</a></li>
  </ul></li>
  <li><a href="#appending-a-column" id="toc-appending-a-column" class="nav-link" data-scroll-target="#appending-a-column">Appending a Column</a>
  <ul class="collapse">
  <li><a href="#calculate-mean" id="toc-calculate-mean" class="nav-link" data-scroll-target="#calculate-mean">Calculate Mean</a></li>
  <li><a href="#calculate-standard-deviation" id="toc-calculate-standard-deviation" class="nav-link" data-scroll-target="#calculate-standard-deviation">Calculate Standard Deviation</a></li>
  <li><a href="#for-loops-without-for-loops" id="toc-for-loops-without-for-loops" class="nav-link" data-scroll-target="#for-loops-without-for-loops">For Loops Without For Loops</a></li>
  <li><a href="#appending" id="toc-appending" class="nav-link" data-scroll-target="#appending">Appending</a></li>
  </ul></li>
  <li><a href="#functionalising" id="toc-functionalising" class="nav-link" data-scroll-target="#functionalising">‘Functionalising’</a>
  <ul class="collapse">
  <li><a href="#downloading-from-a-url" id="toc-downloading-from-a-url" class="nav-link" data-scroll-target="#downloading-from-a-url">Downloading from a URL</a></li>
  <li><a href="#decorating" id="toc-decorating" class="nav-link" data-scroll-target="#decorating">Decorating!</a></li>
  <li><a href="#parse-the-csv-file" id="toc-parse-the-csv-file" class="nav-link" data-scroll-target="#parse-the-csv-file">Parse the CSV File</a></li>
  <li><a href="#convert-the-csv-into-a-dol" id="toc-convert-the-csv-into-a-dol" class="nav-link" data-scroll-target="#convert-the-csv-into-a-dol">Convert the CSV into a DoL</a></li>
  <li><a href="#adding-docstring" id="toc-adding-docstring" class="nav-link" data-scroll-target="#adding-docstring">Adding Docstring</a></li>
  <li><a href="#creating-a-package" id="toc-creating-a-package" class="nav-link" data-scroll-target="#creating-a-package">Creating a Package</a></li>
  </ul></li>
  <li><a href="#classes-and-inheritance" id="toc-classes-and-inheritance" class="nav-link" data-scroll-target="#classes-and-inheritance">Classes and Inheritance</a>
  <ul class="collapse">
  <li><a href="#abstract-base-class" id="toc-abstract-base-class" class="nav-link" data-scroll-target="#abstract-base-class">Abstract Base Class</a></li>
  <li><a href="#cube" id="toc-cube" class="nav-link" data-scroll-target="#cube">Cube</a></li>
  <li><a href="#sphere" id="toc-sphere" class="nav-link" data-scroll-target="#sphere">Sphere</a></li>
  <li><a href="#regular-pyramid" id="toc-regular-pyramid" class="nav-link" data-scroll-target="#regular-pyramid">Regular Pyramid</a></li>
  <li><a href="#triangular-pyramid" id="toc-triangular-pyramid" class="nav-link" data-scroll-target="#triangular-pyramid">Triangular Pyramid</a></li>
  <li><a href="#testing-your-classes" id="toc-testing-your-classes" class="nav-link" data-scroll-target="#testing-your-classes">Testing Your Classes</a></li>
  <li><a href="#packaging-it-up" id="toc-packaging-it-up" class="nav-link" data-scroll-target="#packaging-it-up">Packaging It Up</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul class="collapse"><li><a href="https://github.com/jreades/jaipur/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Think Data</h1>
<p class="subtitle lead">An Introduction to Lists and Dictionaries</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this notebook we are going to look in more detail at how we can reduce, reuse, and recycle our code to make our lives easier and our code more efficient.</p>
<section id="tackling-programming-problems" class="level1">
<h1>Tackling Programming Problems</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Connections
</div>
</div>
<div class="callout-body-container callout-body">
<p>You will find links here to the Code Camp sessions on <a href="https://jreades.github.io/code-camp/lessons/Functions.html">Functions</a> and <a href="https://jreades.github.io/code-camp/lessons/Packages.html">Packages</a>, as well as to this week’s lectures on <a href="https://jreades.github.io/fsds/sessions/week3.html#lectures">Functions</a> and <a href="https://jreades.github.io/fsds/sessions/week3.html#lectures">Packages</a>.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: Medium.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Let’s now think about how to approach problems in programming (with code) and how that might differ from other ways of thinking.</p>
<p>The problem we will use here as an example is: <em>download a data file that we know is hosted on a web site and output some information about those data</em>. This sounds hard. It <em>is</em> hard when you’re just starting out in programming. But it is <em>not</em> hard for a computer… <em>iff</em> we can figure out what to tell it to do <em>and</em> make use of work that other people have done for us!</p>
<section id="what-do-we-do-break-it-down" class="level3">
<h3 class="anchored" data-anchor-id="what-do-we-do-break-it-down">What Do We Do? Break It Down!</h3>
<section id="step-1.-analyse-the-problem" class="level4">
<h4 class="anchored" data-anchor-id="step-1.-analyse-the-problem">Step 1. Analyse the Problem</h4>
<p>The first step to writing a program is thinking about your goal and the steps required to achieve that. We <em><strong>don’t</strong></em> write programs like we write essays: all at once by writing a whole lot of code and then hoping for the best when we hit ‘submit’.&nbsp;</p>
<p>When you’re tackling a programming problem you break it down into separate, simpler steps, and then tick them off one by one. Doing this gets easier as you become more familiar with programming, but it remains crucial and, in many cases, good programmers in large companies spend more time on <em>design</em> than they do on actual <em>coding</em>.</p>
</section>
<section id="step-2.-functions-packages" class="level4">
<h4 class="anchored" data-anchor-id="step-2.-functions-packages">Step 2. Functions &amp; Packages</h4>
<p>We have discussed how <em>functions</em> are a useful programming tool to enable us to re-use chunks of code. Basically, a function is a way to do something to something in a portable, easy-to-use little bundle of code.</p>
<p>Some steps in a program are done so many times by so many people that, eventually, someone writes a <em>package</em> that bundles up those operations into something easy to use that saves <em>you</em> having to figure out the gory details. Reading a file (even one on a computer halfway round the world) is one of those things. Making sense of the data <em>in</em> that file for you is probably not.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://imgs.xkcd.com/comics/tasks.png" class="img-fluid figure-img"></p>
<figcaption>xkcd: Easy vs.&nbsp;Hard</figcaption>
</figure>
</div>
<p>To a computer, reading data from a remote location (e.g.&nbsp;a web site halfway around the world) is not really any different from reading one that’s sitting on your your local hard drive (e.g.&nbsp;on your desktop). To simplify things a great deal: the computer really just needs to know the location of the file and an appropriate <em>protocol</em> for accessing that file (<em>e.g.</em> http, https, ftp, local…) and then a clever programming language like Python will typically have packages that can kind of take of the rest.</p>
<p>In all cases – local and remote – you use the package to handle the hard bit of knowing how to actually ‘read’ data (because all files are just <code>1</code>s and <code>0</code>s of data) at the <em>device</em> level and then Python gives you back a ‘file handle’ that helps you to achieve things like ‘read a line’ or ‘close an open file’. You can think of a filehandle as something that gives you a ‘grip’ on a file-like object no matter where or what it is, and the package is the way that this magic is achieved.</p>
</section>
<section id="step-3.-look-for-ways-to-recycle" class="level4">
<h4 class="anchored" data-anchor-id="step-3.-look-for-ways-to-recycle">Step 3. Look for Ways to Recycle</h4>
<p><strong>Always</strong> look for ways to avoid reinventing the wheel. This is where Python’s packages (or R’s for that matter) come into their own. If it’s something that programmers often need to do, then chances are that someone has written a package to do it!</p>
<p>The point of packages is that they can help us to achieve quite a lot very quickly since we can just make use of someone else’s code. In the same way that we won’t mark you down for Googling the answer to a coding question, we <em>also</em> won’t mark you down for using someone else’s package to help you get going with your programming. <em><strong>That’s the whole point!</strong></em></p>
<p>Often, if you’re not sure where to start, Google (or StackOverflow) is the place to go:</p>
<p><a href="https://www.google.co.uk/search?q=how+to+read+text+file+on+web+server+python&amp;oq=how+to+read+text+file+on+web+server+python&amp;aqs=chrome..69i57.629j0j7&amp;sourceid=chrome&amp;ie=UTF-8"><code>how to read text file on web server python</code></a></p>
<p>Boom!</p>
</section>
<section id="step-4.-make-a-plan" class="level4">
<h4 class="anchored" data-anchor-id="step-4.-make-a-plan">Step 4. Make a Plan</h4>
<p>OK, so we need to break this <em>hard</em> problem down into something simpler. We can do this by thinking about it as three separate steps:</p>
<ol type="1">
<li>We want to read a remote file (i.e.&nbsp;a text file somewhere the planet),</li>
<li>We want to turn it into a local data structure (i.e a list or a dictionary),</li>
<li>We want to perform some calculations on the data (e.g.&nbsp;calculate the mean, find the easternmost city, etc.).</li>
</ol>
<p>We can tackle each of those in turn, getting the first bit working, then adding the second bit, etc. It’s just like using lego to build something: you take the same pieces and assemble them in different ways to produce different things.</p>
</section>
</section>
<section id="reading-a-remote-file" class="level2">
<h2 class="anchored" data-anchor-id="reading-a-remote-file">Reading a Remote File</h2>
<p>So, we are going to <a href="https://github.com/jreades/fsds/blob/master/data/src/Wikipedia-Cities-simple.csv">download a file from GitHub</a>, but we <strong>aren’t going to to try to turn it into data</strong> or otherwise make ‘sense’ of it yet, we just want to <strong>read</strong> it. We are then going to build from this first step towards the rest of the steps!</p>
<p>Because we’re accessing data from a ‘URL’ we need to use the <code>urlopen</code> <a href="https://docs.python.org/3.0/library/urllib.request.html?highlight=urlopen#urllib.request.urlopen">function</a> from the <code>urllib.request</code> <a href="https://docs.python.org/3.0/library/urllib.request.html">package</a>. If you’re wondering how we know to use this function and package, you might google something like: <em>read remote csv file python 3</em> which in turn might get you to a StackOverflow question and answer like <a href="https://stackoverflow.com/questions/36965864/opening-a-url-with-urllib-in-python-3">this</a>.</p>
<style type="text/css">
.longform {
    max-height: 500px;
    overflow-y: scroll;
}
</style>
<div class="longform">
<div id="fe54cd68" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(urlopen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on function urlopen in module urllib.request:

urlopen(url, data=None, timeout=&lt;object object at 0x100a748c0&gt;, *, cafile=None, capath=None, cadefault=False, context=None)
    Open the URL url, which can be either a string or a Request object.

    *data* must be an object specifying additional data to be sent to
    the server, or None if no such data is needed.  See Request for
    details.

    urllib.request module uses HTTP/1.1 and includes a "Connection:close"
    header in its HTTP requests.

    The optional *timeout* parameter specifies a timeout in seconds for
    blocking operations like the connection attempt (if not specified, the
    global default timeout setting will be used). This only works for HTTP,
    HTTPS and FTP connections.

    If *context* is specified, it must be a ssl.SSLContext instance describing
    the various SSL options. See HTTPSConnection for more details.

    The optional *cafile* and *capath* parameters specify a set of trusted CA
    certificates for HTTPS requests. cafile should point to a single file
    containing a bundle of CA certificates, whereas capath should point to a
    directory of hashed certificate files. More information can be found in
    ssl.SSLContext.load_verify_locations().

    The *cadefault* parameter is ignored.


    This function always returns an object which can work as a
    context manager and has the properties url, headers, and status.
    See urllib.response.addinfourl for more detail on these properties.

    For HTTP and HTTPS URLs, this function returns a http.client.HTTPResponse
    object slightly modified. In addition to the three new methods above, the
    msg attribute contains the same information as the reason attribute ---
    the reason phrase returned by the server --- instead of the response
    headers as it is specified in the documentation for HTTPResponse.

    For FTP, file, and data URLs and requests explicitly handled by legacy
    URLopener and FancyURLopener classes, this function returns a
    urllib.response.addinfourl object.

    Note that None may be returned if no handler handles the request (though
    the default installed global OpenerDirector uses UnknownHandler to ensure
    this never happens).

    In addition, if proxy settings are detected (for example, when a *_proxy
    environment variable like http_proxy is set), ProxyHandler is default
    installed and makes sure the requests are handled through the proxy.
</code></pre>
</div>
</div>
</div>
<p>As you can see, there is <em>lot</em> of information here about how things work. A <em>lot</em> of it won’t make much sense at the moment. That’s ok. <em>Some</em> of this doesn’t make much sense to me, but that’s because this is the <em>full</em> documentation from Python so it’s trying to cover <em>all</em> the bases. You don’t need to read every line of this, what you are looking is information about things like the ‘signature’ (what parameters the function accepts) and its output. Of course, you can also <em>just Google it</em>!</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember that you can use <code>dir(...)</code> and <code>help(...)</code> to investigate what a package offers. You can also get help in Jupyter by typing <code>?</code> before the function that you want to call.</p>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
URLError?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you are working behind a firewall (esp.&nbsp;if working on this practical in, say, China) then there is a <em>chance</em> you will get a <code>URLError</code> (<code>&lt;urlopen error [Errno 110044] getaddrinfo failed&gt;</code>). This is a ‘<a href="https://stackoverflow.com/questions/7334199/getaddrinfo-failed-what-does-that-mean">proxy error</a>’ and in this case you may need to <a href="https://stackoverflow.com/a/28153935">configure your environment</a> as follows:</p>
<pre><code>import os
os.environ['HTTP_PROXY'] = 'http://127.0.0.1:10809'
os.environ['HTTPS_PROXY'] = 'http://127.0.0.1:10809'</code></pre>
</div>
</div>
</div>
<p>Before you start working on the code, why not open the data file <a href="https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities-simple.csv">directly in your browser</a>? It’s pretty small, and it will give you a sense of what is going on.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> URLError</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Given the info you were given above, what do you </span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co"># think the value of 'url' should be? What</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># type of variable is it? int or string? </span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities-simple.csv'</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the URL stream into variable called 'response'</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># using the function that we imported above</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> urlopen(url)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> URLError <span class="im">as</span> e:</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Unable to connect to URL!"</span>)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(e)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co"># You might want to explore what `__class__` and `__name__`</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co"># are doing, but basically the give us a way of finding out what</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co"># is 'behind' more complex variables</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Now read from the stream, decoding so that we get actual text</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>raw <span class="op">=</span> response.read()</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"'raw' variable is of type: '</span><span class="sc">{</span>raw<span class="sc">.</span>__class__<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss">'."</span>)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Raw content is:</span><span class="ch">\n</span><span class="sc">{</span>raw[:<span class="dv">75</span>]<span class="sc">}</span><span class="ss">...</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> raw.decode(<span class="st">'utf-8'</span>)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"'data' variable is of type: '</span><span class="sc">{</span>data<span class="sc">.</span>__class__<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss">'."</span>)</span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Decoded content is:</span><span class="ch">\n</span><span class="sc">{</span>data[:<span class="dv">75</span>]<span class="sc">}</span><span class="ss">..."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that the <code>raw</code> data has the format <code>b'...'</code> with all of the data seemingly on one line, while the <em>decoded</em> version in <code>data</code> is ‘correctly’ structured with lines! The ‘raw’ data is in <em>bytecode</em> format which is not, strictly, a <code>string</code>. It only becomes a string when we ‘decode it’ to <code>utf-8</code> (which is the ‘encoding’ of text that supports most human languages). While the computer doesn’t particularly care, we do!</p>
</div>
</div>
<p>Remember that you can treat strings <em>as lists</em>, so when we <code>print</code> below we cut off the output using the <code>list[:&lt;Some Number&gt;]</code> syntax.</p>
<div id="f711256c" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"There are </span><span class="sc">{</span><span class="bu">len</span>(data)<span class="sc">}</span><span class="ss"> characters in the data variable."</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The first 125 characters are: '</span><span class="sc">{</span>data[:<span class="dv">125</span>]<span class="sc">}</span><span class="ss">'"</span>) <span class="co"># Notice that '\n' count here!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 352 characters in the data variable.
The first 125 characters are: 'City,Population,Latitude,Longitude
Perth,45770,56.39583,-3.43333
Armagh,14777,54.3499,-6.6546
Dundee,147268,56.462,-2.9707'</code></pre>
</div>
</div>
<p>So this is definitely text, but it doesn’t (yet) look entirely like the data <em>we</em> see because it’s still just one long string, and not <em>data</em> which has individual records on each line. To split the text into individual lines, we can use the handily named <code>.splitlines()</code> method (more on methods below):</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> ??.splitlines()</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"'rows' variable is of type: </span><span class="sc">{</span>rows<span class="sc">.</span>__class__<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss">'."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>rows <span class="op">=</span> data.splitlines()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"'rows' variable is of type: </span><span class="sc">{</span>rows<span class="sc">.</span>__class__<span class="sc">.</span><span class="va">__name__</span><span class="sc">}</span><span class="ss">'."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>'rows' variable is of type: list'.</code></pre>
</div>
</div>
</div>
<p>Note now, how the <em>data</em> variable has type <code>list</code>. So to view the data as we see them in the original online file, we can now use a <code>for</code> loop to print out each element of the <code>list</code> (each element being a row of the original online file):</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"There are </span><span class="sc">{??}</span><span class="ss"> rows of data."</span>)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(??[<span class="dv">0</span>:<span class="dv">2</span>])) <span class="co"># New syntax alert! notice we can *join* list elements</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"There are </span><span class="sc">{</span><span class="bu">len</span>(rows)<span class="sc">}</span><span class="ss"> rows of data."</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>.join(rows[<span class="dv">0</span>:<span class="dv">2</span>])) <span class="co"># New syntax alert! notice we can *join* list elements</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>There are 11 rows of data.
City,Population,Latitude,Longitude
Perth,45770,56.39583,-3.43333</code></pre>
</div>
</div>
</div>
<p>That’s a little hard to read, though something has clearly changed. Let’s try printing the last row:</p>
<div id="88b4a1df" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(rows[<span class="op">-</span><span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Bangor,18808,53.228,-4.128</code></pre>
</div>
</div>
<p><strong>Congratulations!</strong> You’ve now read a text file sitting on a server in, I think, Canada and Python <em>didn’t care</em>. You’ve also converted a plain-text file to a row-formatted list.</p>
</section>
<section id="text-into-data" class="level2">
<h2 class="anchored" data-anchor-id="text-into-data">Text into Data</h2>
<p>We now need to work on turning the response into useful data. We got partway there by splitting on line-breaks (<code>splitlines()</code>), but now we need to get columns for each line. You’ll notice that we are dealing with a <em>CSV</em> (Comma-Separated Value) file and that the format <em>looks</em> quite simple… So, in theory, to turn this into data we ‘just’ need to <em>split</em> each row into separate fields using the commas.</p>
<p>There’s a handy function associated with strings called <code>split</code>:</p>
<div id="d939f7ad" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'abcdefgh'</span>.split(<span class="st">'d'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['abc', 'efgh']</code></pre>
</div>
</div>
<p>You can also investigate further how the split function works using:</p>
<div id="09e09b30" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(<span class="st">'abcdefgh'</span>.split)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on built-in function split:

split(sep=None, maxsplit=-1) method of builtins.str instance
    Return a list of the substrings in the string, using sep as the separator string.

      sep
        The separator used to split the string.

        When set to None (the default value), will split on any whitespace
        character (including \n \r \t \f and spaces) and will discard
        empty strings from the result.
      maxsplit
        Maximum number of splits.
        -1 (the default value) means no limit.

    Splitting starts at the front of the string and works to the end.

    Note, str.split() is mainly useful for data that has been intentionally
    delimited.  With natural text that includes punctuation, consider using
    the regular expression module.
</code></pre>
</div>
</div>
<p>So this seems like a good solution to turn our text into <em>data</em>:</p>
<div id="4e5c131e" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> rows[<span class="op">-</span><span class="dv">1</span>].split(<span class="st">','</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The population of </span><span class="sc">{</span>test[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> is </span><span class="sc">{</span><span class="bu">int</span>(test[<span class="dv">1</span>])<span class="sc">:,}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['Bangor', '18808', '53.228', '-4.128']
The population of Bangor is 18,808</code></pre>
</div>
</div>
<p>I’d say that we’re now getting quite close to something that looks like ‘real data’: I know how to convert a raw response from a web server into a string, to split that string into rows, and can even access individual elements from a row!</p>
</section>
<section id="the-advantages-of-a-package" class="level2">
<h2 class="anchored" data-anchor-id="the-advantages-of-a-package">The Advantages of a Package</h2>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Caution
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are two problems to the <code>data.splitlines()</code> and <code>row.split(',')</code> approach! One of them is visible (though not obvious) in the examples above, the other is not.</p>
</div>
</div>
<ol type="1">
<li>Remember that <code>10</code> and <code>'10'</code> are <em>not</em> the same thing. To comma-format the population of Sheffield you’ll see that I had to do <code>int(...)</code> in order to turn <code>'685368'</code> into a number. So our approach so far doesn’t know anything about the <em>type</em> of data we’re working with.</li>
<li>We are also implicitly <em>assuming</em> that commas can only appear at field boundaries (i.e.&nbsp;that they can only appear to separate one column of data from the next). In other words, just using <code>split(',')</code> doesn’t work if <em>any</em> of the fields can themselves contain a comma!</li>
<li>There’s actually a <em>third</em> potential issue, but it’s so rare that we would need to take a completely different approach to deal with it: we are also assuming that newlines (<code>\n</code>) can only appear at record boundaries (i.e.&nbsp;that the can only appear to separate one row of data from the next). In those cases, using <code>splitlines()</code> also doesn’t work, but this situation is (thankfully) very rare indeed.</li>
</ol>
<p>This is where using code that someone <em>else</em> who is much more interested (and knowledgeable) has written and contributed is helpful: we don’t need to think through how to deal with this sort of thing ourselves, we can just find a library that does what we need and make use of <em>its</em> functionality. I’ve given you the skeleton of the answer below, but you’ll need to do a little Googling to find out how to <code>"read csv python"</code>.</p>
<p><strong>Note:</strong> For now just focus on problem #2.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities-simple.csv'</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> urlopen(url)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>raw <span class="op">=</span> response.read()</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Now take the raw data, decode it, and then</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># pass it over to the CSV reader function</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>csvfile  <span class="op">=</span> csv.reader(raw.decode(<span class="st">'utf-8'</span>).splitlines()) </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>urlData <span class="op">=</span> [] <span class="co"># Somewhere to store the data</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> csvfile:              </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    urlData.append( row )</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"urlData has "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(urlData)) <span class="op">+</span> <span class="st">" rows and "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(urlData[<span class="dv">0</span>])) <span class="op">+</span> <span class="st">" columns."</span>)</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(urlData[<span class="op">-</span><span class="dv">1</span>]) <span class="co"># Check it worked!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If it worked, then you should have this output:</p>
<div id="f7995ba2" class="cell" data-execution_count="11">
<div class="cell-output cell-output-stdout">
<pre><code>urlData has 11 rows and 4 columns.
['Bangor', '18808', '53.228', '-4.128']</code></pre>
</div>
</div>
<p>To you that might look a lot <em>worse</em> that the data that you originally had, but to a computer that list-of-lists is something it can work with; check it out:</p>
<div id="0eb9cc2f" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> u <span class="kw">in</span> urlData[<span class="dv">1</span>:<span class="dv">6</span>]: <span class="co"># For each row in the first 5 items in list</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"The city of '</span><span class="sc">{</span>u[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">' has a population of </span><span class="sc">{</span><span class="bu">int</span>(u[<span class="dv">1</span>])<span class="sc">:,}</span><span class="ss">"</span>) <span class="co"># Print out the name and pop</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The city of 'Perth' has a population of 45,770
The city of 'Armagh' has a population of 14,777
The city of 'Dundee' has a population of 147,268
The city of 'Colchester' has a population of 194,706
The city of 'Salisbury' has a population of 40,302</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Why did I use <code>urlData[1:]</code> instead of <code>urlData</code>?</p>
<p>If you print <code>urlData[0]</code> you’ll see that this is the ‘header’ row that tells us what each column contains! So if we try to convert the column name to an integer (<code>int(u[1])</code>) we will get an error!</p>
<p>The advantage of using the <code>csv</code> library over plain old <code>string.split</code> is that the csv library knows how to deal with fields that contain commas (<em>e.g.</em> <code>"Cardfiff, Caerdydd"</code> or <code>"An Amazing 4 Bedroom Home, Central London, Sleeps 12"</code>) and so is much more flexible and consistent that our naive <code>split</code> approach. The vast majority of <em>common</em> tasks (reading certain types of files, getting remote files, etc.) have libraries that do exactly what you want without you needing to write much code yourself to take advantage of it. You should always have a look around online to see if a library exists before thinking that you need to write everything/anything from scratch. The tricky part is knowing what words to use for your search and how to read the answers that you find…</p>
</div>
</div>
<p>Let’s try this with a ‘bigger’ data set… In an ideal world, the ‘power’ of code is that once we’ve solved the problem <em>once</em>, we’ve solved it more generally as well. So let’s try with the ‘scaled-up’ data set and see waht happens!</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities.csv"</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> urlopen(url)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>raw <span class="op">=</span> response.read()</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>csvfile <span class="op">=</span> csv.reader(raw.decode(<span class="st">'utf-8'</span>).splitlines())</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>urlData <span class="op">=</span> [] <span class="co"># Somewhere to store the data</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> csvfile:              </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    urlData.append( row )</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"urlData has </span><span class="sc">{</span><span class="bu">len</span>(urlData)<span class="sc">}</span><span class="ss"> rows and </span><span class="sc">{</span><span class="bu">len</span>(urlData[<span class="dv">0</span>])<span class="sc">}</span><span class="ss"> columns."</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> u <span class="kw">in</span> urlData[<span class="dv">70</span>:]:  <span class="co"># For each row in the list</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"The city of '</span><span class="sc">{</span>u[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">' has a population of </span><span class="sc">{</span>u[<span class="dv">1</span>]<span class="sc">}</span><span class="ss">"</span>) <span class="co"># Print out the name and pop</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What mistake have I made here?
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I have assumed that, just because the files have similar names, they must also have similar layouts!</p>
<div id="778d897e" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The URL's data labels are: </span><span class="sc">{</span><span class="st">', '</span><span class="sc">.</span>join(urlData[<span class="dv">0</span>])<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The URL's data labels are: City, Population, Latitude, Longitude</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="insight" class="level2">
<h2 class="anchored" data-anchor-id="insight">Insight!</h2>
<p>So, although the code was basically the same for both of these files (good), we would need to change quite a bit in order to print out the <em>same</em> information from different versions of the <em>same data</em>. So our code is rather <strong>brittle</strong>.</p>
<p>One of the issues is that our <em>instincts</em> about how to manage data doesn’t align with how the computer can most <em>efficiently</em> manage it. We make the mistake of thinking that the computer needs to do things that same way that we do when reading text and so assume that we need to:</p>
<ol type="1">
<li>Represent the rows as a list.</li>
<li>Represent the columns as a list for each row.</li>
</ol>
<p>This thinking suggests that the ‘right’ data structure would clearly be a list-of-lists (LoLs!), but if you understand what happened here then the next section will make a <em>lot</em> more sense!</p>
</section>
</section>
<section id="why-obvious-is-not-always-right" class="level1">
<h1>Why ‘Obvious’ is Not Always ‘Right’</h1>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🔗 Connections
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section builds on the material covered by the <a href="https://jreades.github.io/fsds/sessions/week3.html#lectures">DOLs to Data</a> lecture.</p>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: Hard.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>But you need to be careful assuming that, just because something is hard for you to read, it’s also hard for a computer to read! The way a computer ‘thinks’ and the way that we think doesn’t always line up naturally. Experienced programmers can think their way <em>around</em> a problem by working <em>with</em> the computer, rather than against it.</p>
<p>Some issues to consider:</p>
<ul>
<li>Is the first row of data <em>actually</em> data, or is it <em>about</em> data?</li>
<li>Do we really care about column <em>order</em>, or do we just care about being able to pick the <em>correct</em> column?</li>
</ul>
<p>Let’s apply this approach to the parsing of our data…</p>
<section id="understanding-whats-an-appropriate-data-structure" class="level2">
<h2 class="anchored" data-anchor-id="understanding-whats-an-appropriate-data-structure">Understanding What’s an ‘Appropriate’ Data Structure</h2>
<p>If you stop to think about it, then our list-of-lists approach to the data isn’t very easy to navigate. Notice that if the position or name of a column changes then we need to change our program <em>every</em> time we re-run it! It’s not very easy to read <em>either</em> since we don’t really know what <code>u[5]</code> is supposed to be. That way lies all kinds of potential errors!</p>
<p>Also consider that, in order to calculate out even a simple aggregate such as the <code>sum</code> of a field for all rows we need to step through a lot of irrelevant data as well: we have to write a <code>for</code> loop and then step through each row with an ‘accumulator’ (somewhere to store the total). That’s slow.</p>
<p>That doesn’t make much sense since this should all be <em>easier</em> and <em>faster</em> in Python than in Excel, but right now it’s <em>harder</em>, and quite possibly <em>slower</em> as well! So how does the experienced programmer get around this? ‘Simple’ (i.e.&nbsp;neither simple, nor obvious, until you know the answer): she realises that the data is organised the wrong way! We humans tend to think in rows of data: this apartment has the following <em>attributes</em> (price, location, etc.), or that city has the following <em>attributes</em> (population, location). We read across the row because that’s the easiest way for <em>us</em> to think about it. But, in short, a list-of-lists does <em>not</em> seem to be the right way to store this data!</p>
<p>Crucially, a computer doesn’t have to work that way. For a computer, it’s as easy to read <em>down</em> a column as it is to read <em>across</em> a row. <strong>In fact, it’s easier</strong>, because each column has the same <em>type</em> of data: one column contains names (strings), another column contains prices (integers), and other columns contain other types of data (floats, etc.). Better still, the order of the columns often doesn’t matter as long as we know what the columns are called: it’s easier to ask for the ‘description column’ than it is to ask for the 6th column since, for all we know, the description column might be in a different place for different files but they are all (relatively) likely to use the ‘description’ label for the column itself.</p>
<section id="a-dictionary-of-lists-to-the-rescue" class="level3">
<h3 class="anchored" data-anchor-id="a-dictionary-of-lists-to-the-rescue">A Dictionary of Lists to the Rescue</h3>
<p>So, if we don’t care about column order, only row order, then a dictionary of lists would be a nice way to handle things. And why should we care about column order? With our CSV files above we already saw what a pain it was to fix things when the layout of the columns changed from one data set to the next. If, instead, we can just reference the ‘description’ column then it doesn’t matter where that column actually is. Why is that?</p>
<p>Well, here are the first four rows of data from a list-of-lists for city sizes:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>myData <span class="op">=</span> [</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  [<span class="st">'id'</span>, <span class="st">'Name'</span>, <span class="st">'Rank'</span>, <span class="st">'Longitude'</span>, <span class="st">'Latitude'</span>, <span class="st">'Population'</span>], </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  [<span class="st">'1'</span>, <span class="st">'Greater London'</span>, <span class="st">'1'</span>, <span class="st">'-18162.92767'</span>, <span class="st">'6711153.709'</span>, <span class="st">'9787426'</span>], </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  [<span class="st">'2'</span>, <span class="st">'Greater Manchester'</span>, <span class="st">'2'</span>, <span class="st">'-251761.802'</span>, <span class="st">'7073067.458'</span>, <span class="st">'2553379'</span>], </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  [<span class="st">'3'</span>, <span class="st">'West Midlands'</span>, <span class="st">'3'</span>, <span class="st">'-210635.2396'</span>, <span class="st">'6878950.083'</span>, <span class="st">'2440986'</span>]</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Now, here’s how it would look as a dictionary of lists organised by <em>column</em>, and <em>not</em> by row:</p>
<div id="e6e6ad13" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>myData <span class="op">=</span> {</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'id'</span>         : [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Name'</span>       : [<span class="st">'London'</span>, <span class="st">'Manchester'</span>, <span class="st">'Birmingham'</span>,<span class="st">'Edinburgh'</span>,<span class="st">'Inverness'</span>,<span class="st">'Lerwick'</span>],</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Rank'</span>       : [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Longitude'</span>  : [<span class="op">-</span><span class="fl">0.128</span>, <span class="op">-</span><span class="fl">2.245</span>, <span class="op">-</span><span class="fl">1.903</span>, <span class="op">-</span><span class="fl">3.189</span>, <span class="op">-</span><span class="fl">4.223</span>, <span class="op">-</span><span class="fl">1.145</span>],</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Latitude'</span>   : [<span class="fl">51.507</span>, <span class="fl">53.479</span>, <span class="fl">52.480</span>, <span class="fl">55.953</span>, <span class="fl">57.478</span>, <span class="fl">60.155</span>],</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Population'</span> : [<span class="dv">9787426</span>, <span class="dv">2705000</span>, <span class="dv">1141816</span>, <span class="dv">901455</span>, <span class="dv">70000</span>, <span class="dv">6958</span>],</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(myData[<span class="st">'Name'</span>])</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(myData[<span class="st">'Population'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>['London', 'Manchester', 'Birmingham', 'Edinburgh', 'Inverness', 'Lerwick']
[9787426, 2705000, 1141816, 901455, 70000, 6958]</code></pre>
</div>
</div>
<p>What does this do better? Well, for starters, we know that everything in the ‘Name’ column will be a string, and that everything in the ‘Longitude’ column is a float, while the ‘Population’ column contains integers. So that’s made life easier already, but the real benefit is coming up…</p>
</section>
<section id="behold-the-power-of-the-dol" class="level3">
<h3 class="anchored" data-anchor-id="behold-the-power-of-the-dol">Behold the Power of the DoL</h3>
<p>Now let’s look at what you can do with this… but first we need to import one <em>more</em> package that you’re going to see a <em>lot</em> over the rest of term: <code>numpy</code> (Numerical Python), which is used <em>so</em> much that most people simply refer to it as <code>np</code>. This is a <em>huge</em> package in terms of features, but right now we’re interested only in the basic arithmatic functions: <code>mean</code>, <code>max</code>, and <code>min</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
We’ll step through most of these in detail below.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Find the latitude of Manchester:</p>
<div id="8775bf2d" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> <span class="st">"Manchester"</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>lat <span class="op">=</span> myData[<span class="st">'Latitude'</span>][ myData[<span class="st">'Name'</span>].index(city) ]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>city<span class="sc">}</span><span class="ss">'s latitude is </span><span class="sc">{</span>lat<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Manchester's latitude is 53.479</code></pre>
</div>
</div>
<p>Print the location of Lerwick:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="sourceCode" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> <span class="st">"Lerwick"</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The town of </span><span class="sc">{</span>city<span class="sc">}</span><span class="ss"> can be found at "</span> <span class="op">+</span> </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span><span class="bu">abs</span>(myData[??][ ?? ])<span class="sc">}</span><span class="ss">ºW, </span><span class="sc">{</span>myData[<span class="st">'Latitude'</span>][ ?? ]<span class="sc">}</span><span class="ss">ºN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> <span class="st">"Lerwick"</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The town of </span><span class="sc">{</span>city<span class="sc">}</span><span class="ss"> can be found at "</span> <span class="op">+</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span><span class="bu">abs</span>(myData[<span class="st">'Longitude'</span>][myData[<span class="st">'Name'</span>].index(city)])<span class="sc">}</span><span class="ss">ºW, </span><span class="sc">{</span>myData[<span class="st">'Latitude'</span>][myData[<span class="st">'Name'</span>].index(city)]<span class="sc">}</span><span class="ss">ºN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>The town of Lerwick can be found at 1.145ºW, 60.155ºN</code></pre>
</div>
</div>
</div>
<p>Find the easternmost city:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="sourceCode" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> myData[<span class="st">'Name'</span>][ myData[??].index( <span class="bu">max</span>(myData[??]) ) ]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The easternmost city is: </span><span class="sc">{</span>city<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> myData[<span class="st">'Name'</span>][ myData[<span class="st">'Longitude'</span>].index( <span class="bu">max</span>(myData[<span class="st">'Longitude'</span>]) ) ]</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The easternmost city is: </span><span class="sc">{</span>city<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>The easternmost city is: London</code></pre>
</div>
</div>
</div>
<p>Find the <code>mean</code> population of the cities using a handy package called numpy:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="sourceCode" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>mean <span class="op">=</span> np.??(myData[<span class="st">'Population'</span>])</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The mean population is: </span><span class="sc">{</span>mean<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>mean <span class="op">=</span> np.mean(myData[<span class="st">'Population'</span>])</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The mean population is: </span><span class="sc">{</span>mean<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>The mean population is: 2435442.5</code></pre>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p><strong>Stop!</strong> Look closely at what is going on. There’s a <em>lot</em> of content to process in the code above, so do <em>not</em> rush blindly on if this is confusing. Try pulling it apart into pieces and then reassemble it. Start with the bits that you understand and then <em>add</em> complexity.</p>
</div>
</div>
<p>We’ll go through each one in turn, but they nearly all work in the same way and the really key thing is that you’ll notice that we no longer have any loops (which are slow) just <code>index</code> or <code>np.&lt;function&gt;</code> (which is <em>very</em> fast).</p>
</section>
<section id="the-population-of-manchester" class="level3">
<h3 class="anchored" data-anchor-id="the-population-of-manchester">The Population of Manchester</h3>
<p>The code can look pretty daunting, so let’s break it down into two parts. What would you get if you ran just this code?</p>
<div id="31ced57a" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Population'</span>][<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="151">
<pre><code>2705000</code></pre>
</div>
</div>
<p>Remember that this is a dictionary-of-lists (DoL). So, Python first looks for a key named <code>Population</code> in the myData dictionary. It finds out that the value associated with this key is a <em>list</em> and in this example, it just pulls out the second value (index <code>1</code>). Does <strong>that part</strong> make sense?</p>
<p>Now, to the second part:</p>
<div id="841f855c" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Name'</span>].index(<span class="st">'Manchester'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="153">
<pre><code>1</code></pre>
</div>
</div>
<p>Here we look in the dictionary for the key <code>Name</code> and find that that’s <em>also</em> a list. All we’re doing here is asking Python to find the index of ‘Manchester’ for us in that list. And <code>myData['Name'].index('Manchester')</code> gives us back a <code>1</code>, so <em>instead</em> of just writing <code>myData['Population'][1]</code> we can replace the <code>1</code> with <code>myData['Name'].index('Manchester')</code>! Crucially, notice the complete <em>absence</em> of a for loop?</p>
<p>Does that make sense? If it does then you should be having a kind of an 🤯 moment because what we’ve done by taking a column view, rather than a row view, is to make Python’s <code>index()</code> command do the work for us. Instead of having to look through each row for a field that matches ‘Name’ and then check to see if it’s ‘Manchester’, we’ve pointed Python at the right column immediately and asked it to find the match (which it can do very quickly). Once we have a match then we <em>also</em> have the row number to go and do the lookup in the ‘Population’ column because the index <em>is</em> the row number!</p>
</section>
<section id="the-easternmost-city" class="level3">
<h3 class="anchored" data-anchor-id="the-easternmost-city">The Easternmost City</h3>
<p>Where this approach really comes into its own is on problems that involve maths. To figure out the easternmost city in this list we need to find the <em>maximum</em> Longitude and then use <em>that</em> value to look up the city name. So let’s do the same process of pulling this apart into two steps. Let start with the easier bit:</p>
<div id="57cf253a" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Name'</span>][<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="154">
<pre><code>'London'</code></pre>
</div>
</div>
<p>That would give us the name of a city, but we don’t just want the first city in the list, we want the one with the maximum longitude. To achieve <em>that</em> we need to somehow replace the <code>0</code> with the <em><strong>index of the maximum longitude</strong></em>. Let’s break this down further:</p>
<ol type="1">
<li>We first need to <em>find</em> the maximum longitude.</li>
<li>We then need to <em>find</em> the <strong>index</strong> of that maximum longitude.</li>
</ol>
<p>So Step 1 would be:</p>
<div id="35d3234f" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>max_lon <span class="op">=</span> <span class="bu">max</span>(myData[<span class="st">'Longitude'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Because the <code>max(...)</code> helps us to find the maximum longitude in the Longitude list. Now that we have that we can proceed to Step 2:</p>
<div id="5748d32a" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Longitude'</span>].index(max_lon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="156">
<pre><code>0</code></pre>
</div>
</div>
<p>So now we ask Python to find the position of <code>max_lon</code> in the list. But rather than doing this in two steps we can combine into one if we write it down to make it easier to read:</p>
<div id="6638b25a" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Longitude'</span>].index(</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">max</span>(myData[<span class="st">'Longitude'</span>])</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="157">
<pre><code>0</code></pre>
</div>
</div>
<p>There’s the same <code>.index</code> which tells us that Python is going to look for something in the list associated with the <code>Longitude</code> key. All we’ve done is change what’s <em>inside</em> that index function to <code>max(myData['Longitude'])</code>. This is telling Python to find the <em>maximum</em> value in the <code>myData['Longitude']</code> list. So to explain this in three steps, what we’re doing is:</p>
<ul>
<li>Finding the maximum value in the Longitude column (we know there must be one, but we don’t know what it is!),</li>
<li>Finding the index (position) of that maximum value in the Longitude column (now that we know what the value is!),</li>
<li>Using that index to read a value out of the Name column.</li>
</ul>
<p>I <em>am</em> a geek, but that’s pretty cool, right? In one line of code we managed to quickly find out where the data we needed was even though it involved three discrete steps. Think about how much work you’d have to do if you were still thinking in <em>rows</em>, not <em>columns</em>!</p>
</section>
<section id="the-location-of-lerwick" class="level3">
<h3 class="anchored" data-anchor-id="the-location-of-lerwick">The Location of Lerwick</h3>
<p>Lerwick is a small town in <a href="https://www.shetland.org/">the Shetlands</a>, way up to the North of mainland U.K. and somewhere I’ve wanted to go ever since I got back from <a href="https://www.orkney.com/">Orkney</a>–but then I spent my honeymoon in the far North of <a href="https://www.westfjords.is/">Iceland</a>, so perhaps I just don’t like being around lots of people… 🙃</p>
<p>Anyway, this one <em>might</em> be a tiny bit easier conceptually than the other problems, except that I’ve deliberately used a slightly different way of showing the output that might be confusing:</p>
<p>Print the location of Lerwick:</p>
<div id="f573c5c4" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> <span class="st">"Lerwick"</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The town of </span><span class="sc">{</span>city<span class="sc">}</span><span class="ss"> can be found at "</span> <span class="op">+</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f"</span><span class="sc">{</span><span class="bu">abs</span>(myData[<span class="st">'Longitude'</span>][myData[<span class="st">'Name'</span>].index(city)])<span class="sc">}</span><span class="ss">ºW, </span><span class="sc">{</span>myData[<span class="st">'Latitude'</span>][myData[<span class="st">'Name'</span>].index(city)]<span class="sc">}</span><span class="ss">ºN"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The town of Lerwick can be found at 1.145ºW, 60.155ºN</code></pre>
</div>
</div>
<p>The first thing to do is to pull apart the <code>print</code> statement: you can see that this is actually just two ‘f-strings’ joined by a <code>+</code>–having that at the end of the line tells Python that it should carry on to the next line. That’s a handy way to make your code a little easier to read. If you’re creating a list and it’s getting a little long, then you can also continue a line using a <code>,</code> as well!</p>
<section id="the-first-f-string" class="level4">
<h4 class="anchored" data-anchor-id="the-first-f-string">1. The first f-string</h4>
<p>The first string will help you to make sense of the second: f-strings allow you to ‘interpolate’ a variable into a string directly rather than having to have lots of <code>str(x) + " some text " + str(y)</code>. You can write <code>f"{x} some text {y}"</code> and Python will automatically convert the variables <code>x</code> and <code>y</code> to strings and replace <code>{x}</code> with the <em>value of <code>x</code></em> and <code>{y}</code> with the <em>value of <code>y</code></em>.</p>
<p>So here <code>f"The town of {city} can be found at "</code> becomes <code>f"The town of Lerwick can be found at "</code> because <code>{city}</code> is replaced by the value of the variable <code>city</code>. This makes for code that is easier for humans to read and so I’d consider that a good thing.</p>
</section>
<section id="the-second-f-string" class="level4">
<h4 class="anchored" data-anchor-id="the-second-f-string">2. The second f-string</h4>
<p>This one is hard because there’s just a <em>lot</em> of code there. But, again, if we start with what we recognise that it gets just a little bit more manageable… Also, it stands to reason that the only difference between the two outputs is that one asks for the ‘Longitude’ and the other for the ‘Latitude’. So if you can make sense of one you have <em>automatically</em> made sense of the other and don’t need to work it all out.</p>
<p>Let’s start with a part that you might recognise:</p>
<div id="ebc01003" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Name'</span>].index(city)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="159">
<pre><code>5</code></pre>
</div>
</div>
<p>You’ve <em>got</em> this. This is just asking Python to work out the index of Lerwick (because <code>city = 'Lerwick'</code>). So it’s a number. 5 in this case. And we can then think, ’OK so what does this return:</p>
<div id="21988d51" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Longitude'</span>][<span class="dv">5</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="160">
<pre><code>-1.145</code></pre>
</div>
</div>
<p>And the answer is <code>-1.145</code>. That’s the Longitude of Lerwick! There’s just <em>one</em> last thing: notice that we’re talking about degrees West here. So the answer isn’t a negative (because negative West degrees would be <em>East</em>!), it’s the <em>absolute</em> value. And that is the final piece of the puzzle: <code>abs(...)</code> gives us the absolute value of a number!</p>
<div id="4563429b" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(<span class="bu">abs</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on built-in function abs in module builtins:

abs(x, /)
    Return the absolute value of the argument.
</code></pre>
</div>
</div>
</section>
</section>
<section id="the-average-city-size" class="level3">
<h3 class="anchored" data-anchor-id="the-average-city-size">The Average City Size</h3>
<p>Here we’re going to ‘cheat’ a little bit: rather than writing our own function, we’re going to import a package and use someone <em>else’s</em> function. The <code>numpy</code> package contains a <em>lot</em> of useful functions that we can call on (if you don’t believe me, add “<code>dir(np)</code>” on a new line after the <code>import</code> statement), and one of them calculates the average of a list or array of data.</p>
<div id="4319ac42" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"The mean population is </span><span class="sc">{</span>np<span class="sc">.</span>mean(myData[<span class="st">'Population'</span>])<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The mean population is 2435442.5</code></pre>
</div>
</div>
<p>This is where our new approach really comes into its own: because all of the population data is in one place (a.k.a. a <em>series</em> or column), we can just throw the whole list into the <code>np.mean</code> function rather than having to use all of those convoluted loops and counters. Simples, right?</p>
<p>No, not <em>simple</em> at all, but we’ve come up with a way to <em>make</em> it simple.</p>
</section>
<section id="recap" class="level3">
<h3 class="anchored" data-anchor-id="recap">Recap!</h3>
<p>So the <em>really</em> clever bit in all of this isn’t switching from a list-of-lists to a dictionary-of-lists, it’s recognising that the dictionary-of-lists is a <em>better</em> way to work <em>with</em> the data that we’re trying to analyse and that that there are useful functions that we can exploit to do the heavy lifting for us. Simply by changing the way that we stored the data in a ‘data structure’ (i.e.&nbsp;complex arrangement of lists, dictionaries, and variables) we were able to do away with lots of for loops and counters and conditions, and reduce many difficult operations to something that could be done on one line!</p>
</section>
</section>
<section id="brain-teaser" class="level2">
<h2 class="anchored" data-anchor-id="brain-teaser">Brain Teaser</h2>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: 🤯.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Why not have a stab at writing the code to print out the <em>4th most populous</em> city? This can <em>still</em> be done on one line, though you might want to start by breaking the problem down:</p>
<ol type="1">
<li>How do I find the <em>4th</em> largest value in a list?</li>
<li>How do I find the <em>index</em> of the 4th largest value in a list?</li>
<li>How do I use that to look up the name associated with that index?</li>
</ol>
<p>You’ve already done #2 and #3 above so you’ve <em>solved</em> that problem. If you can solve #1 then the rest should fall into place.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You don’t want to use <code>&lt;list&gt;.sort()</code> because that will sort your data <em>in place</em> and break the link between the indexes across the ‘columns’; you want to research the function <code>sorted(&lt;list&gt;)</code> where <code>&lt;list&gt;</code> is the variable that holds your data and <code>sorted(...)</code> just returns whatever you pass it in a sorted order <em>without</em> changing the original list. You’ll see why this matters if you get the answer… otherwise, wait a few days for the answers to post.</p>
</div>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="sourceCode" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the name of the 4th most populous city-region</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> ??</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The fourth most populous city is: "</span> <span class="op">+</span> <span class="bu">str</span>(city))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out the name of the 4th most populous city-region</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>city <span class="op">=</span> myData[<span class="st">'Name'</span>][</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    myData[<span class="st">'Population'</span>].index(<span class="bu">sorted</span>(myData[<span class="st">'Population'</span>], reverse<span class="op">=</span><span class="va">True</span>)[<span class="dv">3</span>])</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The fourth most populous city is: "</span> <span class="op">+</span> <span class="bu">str</span>(city))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>The fourth most populous city is: Edinburgh</code></pre>
</div>
</div>
</div>
<p>The answer is Edinburgh.</p>
</section>
<section id="bringing-it-all-together" class="level2">
<h2 class="anchored" data-anchor-id="bringing-it-all-together">Bringing it all together…</h2>
<p>Conceptually, this is one of the hardest practicals in the entire term because it joins up so many of the seemingly simple ideas that you covered in Code Camp into a very complex ‘stew’ – all our basic ingredients (lists, dictionaries, etc.) have simmered for a bit, been stirred up together, and become something entirely new and more complex.</p>
<p>So if this practical doesn’t make sense to you on the <em>first</em> runthrough, I’d suggest going back through the second half of the practical <em>again</em> in a couple of days’ time – that will give your brain a little time to wrap itself around the basics before you throw the hard stuff at it again. <em>Don’t</em> panic if it doesn’t all make sense on the <em>second</em> runthrough either – this is like a language, you need to practice! With luck, the second time you went through this code a little bit <em>more</em> made sense. If you need to do it a third time you’ll find that even <em>more</em> makes sense… and so on.</p>
<p>This is a very challenging notebook because it takes you <em>both</em> through the process of building a function incrementally <em>and</em> through a ‘simple’ example of how Python classes actually work. You will need to understand these two very different elements in order to make the most of the remaining 6 weeks of term, because we both improve our code incrementally <em>and</em> make use of objects and their inheritances extensively. You also get an extra chance to revisit the differences between LoLs and DoLs because you will undoubtedly encounter and make use of these data structures even <em>after</em> you become a skillfull Python programmer.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a very challenging practical and you should do your best to ensure that you actually understand what you have done and why.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Group Sign-Up
</div>
</div>
<div class="callout-body-container callout-body">
<p>You should now make it a priority <a href="?var:module.signup">Sign Up</a>!</p>
</div>
</div>
</section>
</section>
<section id="why-obvious-is-not-always-right-revisited" class="level1">
<h1>Why ‘Obvious’ is Not Always ‘Right’ (Revisited)</h1>
<p>Practical 3 is hard, so I want to provide <em>another</em> chance for the concepts to bed in before we use them in an <em>object-oriented way through Pandas</em>. Yes, Week 5 will show how we combine concepts covered over the preceding two weeks in <em>practice</em> to ‘do data science’.</p>
<p>First, remember the finding from last week: if we don’t really care about column order, then a dictionary of lists is a nice way to handle data. And why should we care about column order? With our CSV file we saw what a pain it was to fix things when even a tiny thing like the layout of the columns changed. But if, instead, we could just reference the ‘Description’ column in the data set then it doesn’t matter where that column actually is <em>and</em> we would know that all the descriptions would be <em>text</em>, while all the populations or prices would be <em>numbers</em>. Why is that?</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🔗 Connections
</div>
</div>
<div class="callout-body-container callout-body">
<p>This task briefly recaps the final part of the previous practical and builds on the <a href="https://jreades.github.io/fsds/sessions/week3.html#lectures">DOLs to Data</a> and <a href="https://jreades.github.io/fsds/sessions/week4.html#lectures">Functions</a> lectures.</p>
</div>
</div>
<section id="the-way-that-doesnt-work" class="level2">
<h2 class="anchored" data-anchor-id="the-way-that-doesnt-work">The Way That Doesn’t Work</h2>
<p>Recall that this is how four rows of ‘data’ for city sizes organised by <em>row</em> as a list-of-lists look:</p>
<div id="5524366b" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>myData <span class="op">=</span> [</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'id'</span>, <span class="st">'Name'</span>, <span class="st">'Rank'</span>, <span class="st">'Longitude'</span>, <span class="st">'Latitude'</span>, <span class="st">'Population'</span>], </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'1'</span>, <span class="st">'Greater London'</span>, <span class="st">'1'</span>, <span class="st">'-18162.92767'</span>, <span class="st">'6711153.709'</span>, <span class="st">'9787426'</span>], </span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'2'</span>, <span class="st">'Greater Manchester'</span>, <span class="st">'2'</span>, <span class="st">'-251761.802'</span>, <span class="st">'7073067.458'</span>, <span class="st">'2553379'</span>], </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'3'</span>, <span class="st">'West Midlands'</span>, <span class="st">'3'</span>, <span class="st">'-210635.2396'</span>, <span class="st">'6878950.083'</span>, <span class="st">'2440986'</span>]</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To print out a list of every city in the data set <em>when</em> we don’t know where the <code>Name</code> column is in the file we have to jump through some hoops:</p>
<div id="17176829" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>cities <span class="op">=</span> []</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>col    <span class="op">=</span> myData[<span class="dv">0</span>].index(<span class="st">'Name'</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(myData)):</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    cities.append(myData[i][col])</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The cities in the data set are: "</span> <span class="op">+</span> <span class="st">", "</span>.join(cities))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The cities in the data set are: Greater London, Greater Manchester, West Midlands</code></pre>
</div>
</div>
<p>And it’s the same kind of faff if we want to find out if <code>Edinburgh</code> is included in the data set:</p>
<div id="76167447" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>col   <span class="op">=</span> myData[<span class="dv">0</span>].index(<span class="st">'Name'</span>)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>found <span class="op">=</span> <span class="va">False</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="bu">len</span>(myData)):</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> myData[i][col] <span class="op">==</span> <span class="st">'Edinburgh'</span>:</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Found Edinburgh in the data set!"</span>)</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>        found <span class="op">=</span> <span class="va">True</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> found <span class="op">==</span> <span class="va">False</span>:</span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Didn't find Edinburgh in the data set."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Didn't find Edinburgh in the data set.</code></pre>
</div>
</div>
</section>
<section id="the-way-that-does-work" class="level2">
<h2 class="anchored" data-anchor-id="the-way-that-does-work">The Way That Does Work</h2>
<p>Compare that code to how it works for a dictionary-of-lists organised by <em>column</em>. Now try printing out the cities in the data:</p>
<div id="bd74acfa" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>myData <span class="op">=</span> {</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'id'</span>         : [<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>],</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Name'</span>       : [<span class="st">'Greater London'</span>, <span class="st">'Greater Manchester'</span>, <span class="st">'Birmingham'</span>,<span class="st">'Edinburgh'</span>,<span class="st">'Inverness'</span>,<span class="st">'Lerwick'</span>],</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Rank'</span>       : [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>],</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Longitude'</span>  : [<span class="op">-</span><span class="fl">0.128</span>, <span class="op">-</span><span class="fl">2.245</span>, <span class="op">-</span><span class="fl">1.903</span>, <span class="op">-</span><span class="fl">3.189</span>, <span class="op">-</span><span class="fl">4.223</span>, <span class="op">-</span><span class="fl">1.145</span>],</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Latitude'</span>   : [<span class="fl">51.507</span>, <span class="fl">53.479</span>, <span class="fl">52.480</span>, <span class="fl">55.953</span>, <span class="fl">57.478</span>, <span class="fl">60.155</span>],</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Population'</span> : [<span class="dv">9787426</span>, <span class="dv">2705000</span>, <span class="dv">1141816</span>, <span class="dv">901455</span>, <span class="dv">70000</span>, <span class="dv">6958</span>],</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To print out a list of every city in the data set:</p>
<div id="96e7e820" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">", "</span>.join(myData[<span class="st">'Name'</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Greater London, Greater Manchester, Birmingham, Edinburgh, Inverness, Lerwick</code></pre>
</div>
</div>
<p>To find out if <code>Edinburgh</code> is included in the list of data:</p>
<div id="f43514f0" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="st">'Edinburgh'</span> <span class="kw">in</span> myData[<span class="st">'Name'</span>]:</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Found Edinburgh in the data set!"</span>)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"Didn't find Edinburgh in the data set."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Found Edinburgh in the data set!</code></pre>
</div>
</div>
<p>See how even basic questions like “Is Edinburgh in our list of data?” are suddenly easy to answer? We no longer need to loop over the entire data set in order to find one data point. In addition, we know that everything in the ‘Name’ column will be a string, and that everything in the ‘Longitude’ column is a float, while the ‘Population’ column contains integers. So that’s made life easier already. But let’s test this out and see how it works.</p>
</section>
</section>
<section id="appending-a-column" class="level1">
<h1>Appending a Column</h1>
<section id="calculate-mean" class="level2">
<h2 class="anchored" data-anchor-id="calculate-mean">Calculate Mean</h2>
<p>Let’s start by calculating the sample mean (use Google: <code>Python numpy mean...</code>):</p>
<div id="54dce570" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use numpy functions to calculate mean and standard deviation</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>mean <span class="op">=</span> np.mean(myData[<span class="st">'Population'</span>])</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"City distribution has a mean of </span><span class="sc">{</span>mean<span class="sc">:,.0f}</span><span class="ss">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>City distribution has a mean of 2,435,442.</code></pre>
</div>
</div>
</section>
<section id="calculate-standard-deviation" class="level2">
<h2 class="anchored" data-anchor-id="calculate-standard-deviation">Calculate Standard Deviation</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: Low-ish.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Now let’s do the standard deviation:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="sourceCode" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use numpy functions to calculate mean and standard deviation</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>std  <span class="op">=</span> np.??(??)</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"City distribution has a standard deviation of </span><span class="sc">{</span>std<span class="sc">:,.2f}</span><span class="ss">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Use numpy functions to calculate mean and standard deviation</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>std  <span class="op">=</span> np.std(myData[<span class="st">'Population'</span>])</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"City distribution has a standard deviation of </span><span class="sc">{</span>std<span class="sc">:,.2f}</span><span class="ss">."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>City distribution has a standard deviation of 3,406,947.93.</code></pre>
</div>
</div>
</div>
<p>So the <code>numpy</code> package gives us a way to calculate the mean and standard deviation <em>quickly</em> and without having to reinvent the wheel. The other potentially new thing here is <code>{std:,.2f}</code>. This is about <a href="https://www.w3schools.com/python/ref_string_format.asp">string formatting</a> and the main thing to recognise is that this means ‘format this float with commas separating the thousands/millions and 2 digits to the right’. The link I’ve provided uses the slightly older approach of <code>&lt;str&gt;.format()</code> but the formatting approach is the same.</p>
</section>
<section id="for-loops-without-for-loops" class="level2">
<h2 class="anchored" data-anchor-id="for-loops-without-for-loops">For Loops Without For Loops</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: Medium.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Now we’re going to see something called a <strong>List Comprehension</strong>.</p>
<p>In Python you will see code like this a lot: <code>[x for x in list]</code>. This syntax is known as a ‘list comprehension’ and is basically a <code>for</code> loop on one line with the output being assigned to a list. So we can apply an operation (converting to a string, subtracting a value, etc.) to every item in a list without writing out a full for loop.</p>
<p>Here’s a quick example just to show you what’s going on:</p>
<div id="02b5fd3e" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>demo <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>,<span class="dv">10</span>) <span class="co"># &lt;- a *range* of numbers between 0 and 9 (stop at 10)</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>([x<span class="op">**</span><span class="dv">2</span> <span class="cf">for</span> x <span class="kw">in</span> demo]) <span class="co"># square every element of demo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0, 1, 4, 9, 16, 25, 36, 49, 64, 81]</code></pre>
</div>
</div>
<p>Now let’s apply this to our problem. We calculated the the mean and standard deviation above, so now we want to apply the z-score formula to every element of the Population list… Remember that the format for the z-score (when dealing with a sample) is:</p>
<p><span class="math display">\[
z = \frac{x - \bar{x}}{s}
\]</span></p>
<p>And the population standard deviation (by which I mean, if you are dealing with <em>all</em> the data, and not a subsample as we are here) is:</p>
<p><span class="math display">\[
z = \frac{x - \mu}{\sigma}
\]</span></p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="sourceCode" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> [(x <span class="op">-</span> ??)<span class="op">/</span>?? <span class="cf">for</span> x <span class="kw">in</span> myData[<span class="st">'Population'</span>]] <span class="co"># rs == result set</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>([<span class="ss">f"</span><span class="sc">{</span>x<span class="sc">:.3f}</span><span class="ss">"</span> <span class="cf">for</span> x <span class="kw">in</span> rs])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>rs <span class="op">=</span> [(x <span class="op">-</span> mean)<span class="op">/</span>std <span class="cf">for</span> x <span class="kw">in</span> myData[<span class="st">'Population'</span>]] <span class="co"># rs == result set</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>([<span class="ss">f"</span><span class="sc">{</span>x<span class="sc">:.3f}</span><span class="ss">"</span> <span class="cf">for</span> x <span class="kw">in</span> rs])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>['2.158', '0.079', '-0.380', '-0.450', '-0.694', '-0.713']</code></pre>
</div>
</div>
</div>
</section>
<section id="appending" class="level2">
<h2 class="anchored" data-anchor-id="appending">Appending</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: trivial
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>And now let’s add it to the data set:</p>
<div id="69100505" class="cell" data-execution_count="45">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>myData[<span class="st">'Std. Population'</span>] <span class="op">=</span> rs</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(myData[<span class="st">'Std. Population'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[2.1579383252868527, 0.0791199354729932, -0.3797024575689938, -0.45025269939207097, -0.6942995760276591, -0.7128035277711219]</code></pre>
</div>
</div>
<p>And just to show how everything is in a single data structure:</p>
<div id="137f2a02" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> c <span class="kw">in</span> myData[<span class="st">'Name'</span>]:</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> myData[<span class="st">'Name'</span>].index(c)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>c<span class="sc">}</span><span class="ss"> has a population of </span><span class="sc">{</span>myData[<span class="st">'Population'</span>][idx]<span class="sc">:,}</span><span class="ss"> and standardised score of </span><span class="sc">{</span>myData[<span class="st">'Std. Population'</span>][idx]<span class="sc">:.3f}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Greater London has a population of 9,787,426 and standardised score of 2.158
Greater Manchester has a population of 2,705,000 and standardised score of 0.079
Birmingham has a population of 1,141,816 and standardised score of -0.380
Edinburgh has a population of 901,455 and standardised score of -0.450
Inverness has a population of 70,000 and standardised score of -0.694
Lerwick has a population of 6,958 and standardised score of -0.713</code></pre>
</div>
</div>
</section>
</section>
<section id="functionalising" class="level1">
<h1>‘Functionalising’</h1>
<p>Let’s start trying to pull what we’ve learned over the past two weeks together by creating a a set of functions that will help us to:</p>
<ol type="1">
<li>Download a file from a URL (checking if it has already <em>been</em> downloaded to save bandwidth).</li>
<li>Parse it as a CSV file and…</li>
<li>Convert it to a Dictionary-of-Lists</li>
<li>Perform some simple calculations using the resulting data.</li>
</ol>
<p>To be honest, there’s not going to be much about writing our <em>own</em> objects here, but we will be making use of them and, conceptually, an understanding of objects and classes is going to be super-useful for understanding what we’re doing in the remainder of the term!</p>
<section id="downloading-from-a-url" class="level2">
<h2 class="anchored" data-anchor-id="downloading-from-a-url">Downloading from a URL</h2>
<p>Let’s focus on the first part <em>first</em> because that’s the precondition for everything else. If we can get the ‘download a file from a URL’ working then the rest will gradually fall into place through <em>iterative</em> improvments!</p>
<section id="finding-an-existing-answer" class="level3">
<h3 class="anchored" data-anchor-id="finding-an-existing-answer">Finding an Existing Answer</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: Low
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>First, let’s be sensibly lazy–we’ve already written code to read a file from the Internet and turn it into a list of lists. So I’ve copy+pasted that into the code block below since we’re going to start from this point; however, just to help you check your own understanding, I’ve removed a few bits and replaced them with <code>??</code>. Sorry, it’s good practice. 😈</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="sourceCode" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities-simple.csv"</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>urlData <span class="op">=</span> [] <span class="co"># Somewhere to store the data</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> urlopen(url) <span class="co">#&nbsp;Get the data using the urlopen function</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>csvfile  <span class="op">=</span> csv.reader(response.read().decode(<span class="st">'utf-8'</span>).splitlines()) <span class="co"># Pass it over to the reader</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> csvfile:</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>    urlData.append(??)</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"urlData has "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(urlData)) <span class="op">+</span> <span class="st">" rows and "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(urlData[<span class="dv">0</span>])) <span class="op">+</span> <span class="st">" columns."</span>)</span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(urlData[<span class="op">-</span><span class="dv">1</span>]) <span class="co"># Check it worked!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You should get:</p>
<p><code>urlData has 11 rows and 4 columns.</code> <br> <code>[‘Bangor’, ‘18808’, ‘53.228’, ‘-4.128’]</code></p>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="sourceCode" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities-simple.csv"</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>urlData <span class="op">=</span> [] <span class="co"># Somewhere to store the data</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> urlopen(url) <span class="co">#&nbsp;Get the data using the urlopen function</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>csvfile  <span class="op">=</span> csv.reader(response.read().decode(<span class="st">'utf-8'</span>).splitlines()) <span class="co"># Pass it over to the reader</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> row <span class="kw">in</span> csvfile:</span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    urlData.append(row)</span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"urlData has "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(urlData)) <span class="op">+</span> <span class="st">" rows and "</span> <span class="op">+</span> <span class="bu">str</span>(<span class="bu">len</span>(urlData[<span class="dv">0</span>])) <span class="op">+</span> <span class="st">" columns."</span>)</span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(urlData[<span class="op">-</span><span class="dv">1</span>]) <span class="co"># Check it worked!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="getting-organised" class="level3">
<h3 class="anchored" data-anchor-id="getting-organised">Getting Organised</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-22-contents" aria-controls="callout-22" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: Low
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-22" class="callout-22-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Let’s take the code above and modify it so that it is:</p>
<ol type="1">
<li>A function that takes two arguments: a URL; and a destination filename.</li>
<li>Implemented as a function that checks if a file exists already before downloading it again.</li>
</ol>
<p>You will find that the <code>os</code> module helps here because of the <code>path</code> function. And you will <a href="https://lmgtfy.app/?q=check+if+file+exists+python">need to Google</a> how to test if a file exists. I would normally select a StackOverflow link in the results list over anything else because there will normally be an <em>explanation</em> included of why a particular answer is a ‘good one’. I also look at which answers got the most votes (not always the same as the one that was the ‘accepted answer’). In this particular case, I also found <a href="https://careerkarma.com/blog/python-check-if-file-exists/">this answer</a> useful.</p>
<p>I would start by setting my inputs:</p>
<div id="6296f657" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">"https://raw.githubusercontent.com/jreades/fsds/master/data/src/Wikipedia-Cities-simple.csv"</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>out <span class="op">=</span> os.path.join(<span class="st">'data'</span>,<span class="st">'Wikipedia-Cities.csv'</span>) <span class="co"># Print `out` if you aren't sure what this has done!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="sketching-the-function" class="level3">
<h3 class="anchored" data-anchor-id="sketching-the-function">Sketching the Function</h3>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-23-contents" aria-controls="callout-23" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: Low, if you’ve watched the videos…
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-23" class="callout-23-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Then I would sketch out how my function will work using comments. And the simplest thing to start with is checking whether the file has already been downloaded:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="sourceCode" id="cb93"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_url(src, dest):</span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if dest exists -- if it does</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># then we can skip downloading the file,</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># otherwise we have to download it!</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> os.path.isfile(??):</span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> found!"</span>)</span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> *not* found!"</span>)</span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>get_url(url, out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> urllib.request <span class="im">import</span> urlopen</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_url(src, dest):</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if dest exists -- if it does</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># then we can skip downloading the file,</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># otherwise we have to download it!</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> os.path.isfile(dest):</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> found!"</span>)</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> *not* found!"</span>)</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>get_url(url, out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>data/Wikipedia-Cities.csv found!</code></pre>
</div>
</div>
</div>
</section>
<section id="fleshing-out-the-function" class="level3">
<h3 class="anchored" data-anchor-id="fleshing-out-the-function">Fleshing Out the Function</h3>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-24-contents" aria-controls="callout-24" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty level: Medium
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-24" class="callout-24-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>If you really explore what’s going on in the function rather than just running it and moving on.</p>
</div>
</div>
</div>
<p>I would then flesh out the code so that it downloads the file if it isn’t found and then, either way, returns the <em>local</em> file path for our CSV reader to extract:</p>
<div id="d75ee261" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_url(src, dest):</span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check if dest does *not* exist -- that</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># would mean we had to download it!</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> os.path.isfile(dest):</span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> found locally!"</span>)</span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> not found, downloading!"</span>)</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">#&nbsp;Get the data using the urlopen function</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>        response <span class="op">=</span> urlopen(src) </span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>        filedata <span class="op">=</span> response.read().decode(<span class="st">'utf-8'</span>)</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Extract the part of the dest(ination) that is *not*</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># the actual filename--have a look at how </span></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># os.path.split works using `help(os.path.split)`</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>        path <span class="op">=</span> <span class="bu">list</span>(os.path.split(dest)[:<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Create any missing directories in dest(ination) path</span></span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># -- os.path.join is the reverse of split (as you saw above)</span></span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># but it doesn't work with lists... so I had to google how </span></span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># to use the 'splat' operator! os.makedirs creates missing </span></span>
<span id="cb96-23"><a href="#cb96-23" aria-hidden="true" tabindex="-1"></a>        <span class="co"># directories in a path automatically.</span></span>
<span id="cb96-24"><a href="#cb96-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">len</span>(path) <span class="op">&gt;=</span> <span class="dv">1</span> <span class="kw">and</span> path[<span class="dv">0</span>] <span class="op">!=</span> <span class="st">''</span>:</span>
<span id="cb96-25"><a href="#cb96-25" aria-hidden="true" tabindex="-1"></a>            os.makedirs(os.path.join(<span class="op">*</span>path), exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb96-26"><a href="#cb96-26" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb96-27"><a href="#cb96-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">with</span> <span class="bu">open</span>(dest, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb96-28"><a href="#cb96-28" aria-hidden="true" tabindex="-1"></a>            f.write(filedata)</span>
<span id="cb96-29"><a href="#cb96-29" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb96-30"><a href="#cb96-30" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f"Data written to </span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb96-31"><a href="#cb96-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-32"><a href="#cb96-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dest</span>
<span id="cb96-33"><a href="#cb96-33" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb96-34"><a href="#cb96-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the `return contents` line we make it easy to </span></span>
<span id="cb96-35"><a href="#cb96-35" aria-hidden="true" tabindex="-1"></a><span class="co"># see what our function is up to.</span></span>
<span id="cb96-36"><a href="#cb96-36" aria-hidden="true" tabindex="-1"></a>src <span class="op">=</span> get_url(url, out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data/Wikipedia-Cities.csv found locally!</code></pre>
</div>
</div>
</section>
</section>
<section id="decorating" class="level2">
<h2 class="anchored" data-anchor-id="decorating">Decorating!</h2>
<p>Let’s now look into simplifying this code using a dectorator! Our function has become a bit unwieldy and we want to look at how we can simplify that.</p>
<p>The ‘obvious’ (i.e.&nbsp;not obvious) way to do this is to implement the check for a local copy as a decorator on the downloading function. So we have a function that downloads, and a decorator function that checks if the download should even be triggered.</p>
<div id="19cb2f78" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> functools <span class="im">import</span> wraps</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> check_cache(f):</span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">@wraps</span>(f)</span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> wrapper(<span class="op">*</span>args, <span class="op">**</span>kwargs):</span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>        src  <span class="op">=</span> args[<span class="dv">0</span>]</span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>        dest <span class="op">=</span> args[<span class="dv">1</span>]</span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> os.path.isfile(dest):</span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> found locally!"</span>)</span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(dest)</span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss"> not found, downloading!"</span>)</span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span>(f(src, dest))</span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> wrapper</span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a><span class="at">@check_cache</span></span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> get_url(src, dest):    </span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">#&nbsp;Get the data using the urlopen function</span></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a>    response <span class="op">=</span> urlopen(src) </span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a>    filedata <span class="op">=</span> response.read().decode(<span class="st">'utf-8'</span>)</span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Extract the part of the dest(ination) that is *not*</span></span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a>    <span class="co"># the actual filename--have a look at how </span></span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># os.path.split works using `help(os.path.split)`</span></span>
<span id="cb98-24"><a href="#cb98-24" aria-hidden="true" tabindex="-1"></a>    path <span class="op">=</span> <span class="bu">list</span>(os.path.split(dest)[:<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb98-25"><a href="#cb98-25" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb98-26"><a href="#cb98-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Create any missing directories in dest(ination) path</span></span>
<span id="cb98-27"><a href="#cb98-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># -- os.path.join is the reverse of split (as you saw above)</span></span>
<span id="cb98-28"><a href="#cb98-28" aria-hidden="true" tabindex="-1"></a>    <span class="co"># but it doesn't work with lists... so I had to google how </span></span>
<span id="cb98-29"><a href="#cb98-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># to use the 'splat' operator! os.makedirs creates missing </span></span>
<span id="cb98-30"><a href="#cb98-30" aria-hidden="true" tabindex="-1"></a>    <span class="co"># directories in a path automatically.</span></span>
<span id="cb98-31"><a href="#cb98-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(path) <span class="op">&gt;=</span> <span class="dv">1</span> <span class="kw">and</span> path[<span class="dv">0</span>] <span class="op">!=</span> <span class="st">''</span>:</span>
<span id="cb98-32"><a href="#cb98-32" aria-hidden="true" tabindex="-1"></a>        os.makedirs(os.path.join(<span class="op">*</span>path), exist_ok<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb98-33"><a href="#cb98-33" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb98-34"><a href="#cb98-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(dest, <span class="st">'w'</span>) <span class="im">as</span> f:</span>
<span id="cb98-35"><a href="#cb98-35" aria-hidden="true" tabindex="-1"></a>        f.write(filedata)</span>
<span id="cb98-36"><a href="#cb98-36" aria-hidden="true" tabindex="-1"></a>         </span>
<span id="cb98-37"><a href="#cb98-37" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Data written to </span><span class="sc">{</span>dest<span class="sc">}</span><span class="ss">!"</span>)</span>
<span id="cb98-38"><a href="#cb98-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb98-39"><a href="#cb98-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> dest</span>
<span id="cb98-40"><a href="#cb98-40" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb98-41"><a href="#cb98-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the `return contents` line we make it easy to </span></span>
<span id="cb98-42"><a href="#cb98-42" aria-hidden="true" tabindex="-1"></a><span class="co"># see what our function is up to.</span></span>
<span id="cb98-43"><a href="#cb98-43" aria-hidden="true" tabindex="-1"></a>src <span class="op">=</span> get_url(url, out)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>data/Wikipedia-Cities.csv found locally!</code></pre>
</div>
</div>
<p>I’m not going to pretend that’s the <em>best</em> use of a decorator, but it <em>does</em> neatly separate the downloading function from the caching function. In fact, there is already a <a href="https://pvsravanth.medium.com/speeding-up-your-python-code-with-the-cache-decorator-from-functools-bce4731eed69">cache decorator</a> and some of these have unlimited capacity; however, they are intended to run in a ‘live’ context, so you’d still need to download the file again any time you start a new notebook or restart Docker. This caching function saves the actual data locally to <code>dest</code>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stop!
</div>
</div>
<div class="callout-body-container callout-body">
<p>It really would be a good idea to put in the effort to make sense of how this function works. There is a lot going on here and understanding how this function works will help you to understand how to code. You should notice that we don’t try to check if the data file contains any useful data! So if you download or create an empty file while testing, you won’t necessarily get an error until you try to turn it into data afterwards!</p>
</div>
</div>
</section>
<section id="parse-the-csv-file" class="level2">
<h2 class="anchored" data-anchor-id="parse-the-csv-file">Parse the CSV File</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-26-contents" aria-controls="callout-26" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: Low
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-26" class="callout-26-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Now we turn to the next task: parsing the file if it’s a CSV. This implies that it <em>might</em> not be so that’s something we should also consider!</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="sourceCode" id="cb100"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_csv(src):</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    csvdata <span class="op">=</span> []</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(src, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>        csvr <span class="op">=</span> csv.??(f)</span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> csvr:</span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>            csvdata.append(??)</span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return list of lists</span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ??</span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>read_csv(src)</span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a><span class="co">#read_csv('foo.bar') # &lt;- Notice what happens if you try to run this code</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a><span class="co">#read_csv('Practical-04-Objects-Answers.ipynb') # Or this code!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_csv(src):</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>    csvdata <span class="op">=</span> []</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(src, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>        csvr <span class="op">=</span> csv.reader(f)</span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> csvr:</span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>            csvdata.append(r)</span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return list of lists</span></span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> csvdata</span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>read_csv(src)</span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a><span class="co">#read_csv('foo.bar') # &lt;- Notice what happens if you try to run this code</span></span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a><span class="co">#read_csv('Practical-04-Objects-Answers.ipynb') # Or this code!</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>[['City', 'Population', 'Latitude', 'Longitude'],
 ['Perth', '45770', '56.39583', '-3.43333'],
 ['Armagh', '14777', '54.3499', '-6.6546'],
 ['Dundee', '147268', '56.462', '-2.9707'],
 ['Colchester', '194706', '51.88861', '0.90361'],
 ['Salisbury', '40302', '51.07', '-1.79'],
 ['Portsmouth', '205056', '50.80583', '-1.08722'],
 ['Wakefield', '325837', '53.683', '-1.499'],
 ['Bradford', '522452', '53.792', '-1.754'],
 ['Lancaster', '138375', '54.047', '-2.801'],
 ['Bangor', '18808', '53.228', '-4.128']]</code></pre>
</div>
</div>
</div>
<p>You should get:</p>
<p><code> [[‘City’, ‘Population’, ‘Latitude’, ‘Longitude’], [‘Perth’, ‘45770’, ‘56.39583’, ‘-3.43333’], [‘Armagh’, ‘14777’, ‘54.3499’, ‘-6.6546’], [‘Dundee’, ‘147268’, ‘56.462’, ‘-2.9707’], [‘Colchester’, ‘194706’, ‘51.88861’, ‘0.90361’], [‘Salisbury’, ‘40302’, ‘51.07’, ‘-1.79’], [‘Portsmouth’, ‘205056’, ‘50.80583’, ‘-1.08722’], [‘Wakefield’, ‘325837’, ‘53.683’, ‘-1.499’], [‘Bradford’, ‘522452’, ‘53.792’, ‘-1.754’], [‘Lancaster’, ‘138375’, ‘54.047’, ‘-2.801’], [‘Bangor’, ‘18808’, ‘53.228’, ‘-4.128’]] </code></p>
</section>
<section id="convert-the-csv-into-a-dol" class="level2">
<h2 class="anchored" data-anchor-id="convert-the-csv-into-a-dol">Convert the CSV into a DoL</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-27-contents" aria-controls="callout-27" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: Medium.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-27" class="callout-27-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>Now we can focus on converting the CSV data to a dictionary-of-lists! We’re going to start with the <em>same</em> function name but expand what the function <em>does</em>. This kind of <em>iteration</em> is common in software development.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="sourceCode" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_csv(src):</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>    csvdata <span class="op">=</span> {} <span class="co"># An empty dictionary-of-lists</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(??, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>        csvr <span class="op">=</span> csv.reader(f)</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">#&nbsp;Read in our column names and</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>        <span class="co"># initialise the dictionary-of-lists</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>        csvcols <span class="op">=</span> <span class="bu">next</span>(csvr) </span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> c <span class="kw">in</span> csvcols:</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>            csvdata[c] <span class="op">=</span> []</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Notice this code is still the same, </span></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># we just used next(csvr) to get the </span></span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># header row first!</span></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> ??: </span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Although you can often assume that the order </span></span>
<span id="cb103-19"><a href="#cb103-19" aria-hidden="true" tabindex="-1"></a>            <span class="co"># of the keys is the same, Python doesn't </span></span>
<span id="cb103-20"><a href="#cb103-20" aria-hidden="true" tabindex="-1"></a>            <span class="co">#&nbsp;guarantee it; this way we will always make</span></span>
<span id="cb103-21"><a href="#cb103-21" aria-hidden="true" tabindex="-1"></a>            <span class="co"># the correct assignment.</span></span>
<span id="cb103-22"><a href="#cb103-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> idx, c <span class="kw">in</span> <span class="bu">enumerate</span>(csvcols):</span>
<span id="cb103-23"><a href="#cb103-23" aria-hidden="true" tabindex="-1"></a>                csvdata[??].append(r[idx])</span>
<span id="cb103-24"><a href="#cb103-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-25"><a href="#cb103-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return dictionary of lists</span></span>
<span id="cb103-26"><a href="#cb103-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> csvdata</span>
<span id="cb103-27"><a href="#cb103-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-28"><a href="#cb103-28" aria-hidden="true" tabindex="-1"></a>read_csv(src)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> csv</span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_csv(src):</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    csvdata <span class="op">=</span> {} <span class="co"># An empty dictionary-of-lists</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(src, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>        csvr <span class="op">=</span> csv.reader(f)</span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>        <span class="co">#&nbsp;Read in our column names and</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># initialise the dictionary-of-lists</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>        csvcols <span class="op">=</span> <span class="bu">next</span>(csvr)</span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> c <span class="kw">in</span> csvcols:</span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>            csvdata[c] <span class="op">=</span> []</span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Notice this code is still the same,</span></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>        <span class="co"># we just used next(csvr) to get the</span></span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>        <span class="co"># header row first!</span></span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> csvr:</span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Although you can often assume that the order</span></span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a>            <span class="co"># of the keys is the same, Python doesn't</span></span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a>            <span class="co">#&nbsp;guarantee it; this way we will always make</span></span>
<span id="cb104-23"><a href="#cb104-23" aria-hidden="true" tabindex="-1"></a>            <span class="co"># the correct assignment.</span></span>
<span id="cb104-24"><a href="#cb104-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> idx, c <span class="kw">in</span> <span class="bu">enumerate</span>(csvcols):</span>
<span id="cb104-25"><a href="#cb104-25" aria-hidden="true" tabindex="-1"></a>                csvdata[c].append(r[idx])</span>
<span id="cb104-26"><a href="#cb104-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-27"><a href="#cb104-27" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return dictionary of lists</span></span>
<span id="cb104-28"><a href="#cb104-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> csvdata</span>
<span id="cb104-29"><a href="#cb104-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-30"><a href="#cb104-30" aria-hidden="true" tabindex="-1"></a>read_csv(src)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>{'City': ['Perth',
  'Armagh',
  'Dundee',
  'Colchester',
  'Salisbury',
  'Portsmouth',
  'Wakefield',
  'Bradford',
  'Lancaster',
  'Bangor'],
 'Population': ['45770',
  '14777',
  '147268',
  '194706',
  '40302',
  '205056',
  '325837',
  '522452',
  '138375',
  '18808'],
 'Latitude': ['56.39583',
  '54.3499',
  '56.462',
  '51.88861',
  '51.07',
  '50.80583',
  '53.683',
  '53.792',
  '54.047',
  '53.228'],
 'Longitude': ['-3.43333',
  '-6.6546',
  '-2.9707',
  '0.90361',
  '-1.79',
  '-1.08722',
  '-1.499',
  '-1.754',
  '-2.801',
  '-4.128']}</code></pre>
</div>
</div>
</div>
<p>You should get something that starts:</p>
<div id="443e01c1" class="cell" data-execution_count="56">
<div class="cell-output cell-output-stdout">
<pre><code>{'City': ['Perth', 'Armagh', 'Dundee', 'Colchester', 'Salisbury', 'Portsmou...</code></pre>
</div>
</div>
</section>
<section id="adding-docstring" class="level2">
<h2 class="anchored" data-anchor-id="adding-docstring">Adding Docstring</h2>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-28-contents" aria-controls="callout-28" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: Low
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-28" class="callout-28-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>We’ve assumed that the first row of our data set is always a <em>header</em> (i.e.&nbsp;list of column names). If it’s not then this code is going to have problems. A <em>robust</em> function would allow us to specify column names, skip rows, etc. when we create the data structure, but let’s not get caught up in that level of detail. Notice that I’ve also, for the first time:</p>
<ol type="1">
<li>Used the docstring support offered by Python. You’ll be able to use <code>help(...)</code> and get back the docstring help!</li>
<li>Provided hints to Python about the expected input and output data types. This can help to ensure consistency and is also critical in testing / continuous integration when working with others on a codebase.</li>
</ol>
<div id="e041a9f9" class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_csv(src:<span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">dict</span>:</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Converts a CSV file to a dictionary-of-lists (dol),</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="co">    using the first row to create column names.</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="co">    </span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a><span class="co">    param src: a local CSV file</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co">    returns: a dictionary-of-lists</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>    csvdata <span class="op">=</span> {} <span class="co"># An empty dictionary-of-lists</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">with</span> <span class="bu">open</span>(src, <span class="st">'r'</span>) <span class="im">as</span> f:</span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>        csvr <span class="op">=</span> csv.reader(f)</span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">#&nbsp;Read in our column names and</span></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># initialise the dictionary-of-lists</span></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a>        csvcols <span class="op">=</span> <span class="bu">next</span>(csvr) </span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> c <span class="kw">in</span> csvcols:</span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a>            csvdata[c] <span class="op">=</span> []</span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Notice this code is still the same, </span></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a>        <span class="co"># we just used next(csvr) to get the </span></span>
<span id="cb107-22"><a href="#cb107-22" aria-hidden="true" tabindex="-1"></a>        <span class="co"># header row first!</span></span>
<span id="cb107-23"><a href="#cb107-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> r <span class="kw">in</span> csvr: </span>
<span id="cb107-24"><a href="#cb107-24" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Although you can often assume that the order </span></span>
<span id="cb107-25"><a href="#cb107-25" aria-hidden="true" tabindex="-1"></a>            <span class="co"># of the keys is the same, Python doesn't </span></span>
<span id="cb107-26"><a href="#cb107-26" aria-hidden="true" tabindex="-1"></a>            <span class="co">#&nbsp;guarantee it; this way we will always make</span></span>
<span id="cb107-27"><a href="#cb107-27" aria-hidden="true" tabindex="-1"></a>            <span class="co"># the correct assignment.</span></span>
<span id="cb107-28"><a href="#cb107-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> idx, c <span class="kw">in</span> <span class="bu">enumerate</span>(csvcols):</span>
<span id="cb107-29"><a href="#cb107-29" aria-hidden="true" tabindex="-1"></a>                csvdata[c].append(r[idx])</span>
<span id="cb107-30"><a href="#cb107-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb107-31"><a href="#cb107-31" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Return dictionary of lists</span></span>
<span id="cb107-32"><a href="#cb107-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> csvdata</span>
<span id="cb107-33"><a href="#cb107-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-34"><a href="#cb107-34" aria-hidden="true" tabindex="-1"></a>ds <span class="op">=</span> read_csv(src)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="46a09106" class="cell" data-execution_count="58">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(read_csv)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on function read_csv in module __main__:

read_csv(src: str) -&gt; dict
    Converts a CSV file to a dictionary-of-lists (dol),
    using the first row to create column names.

    param src: a local CSV file
    returns: a dictionary-of-lists
</code></pre>
</div>
</div>
<div id="b14fdb00" class="cell" data-execution_count="59">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Columns are: "</span> <span class="op">+</span> <span class="st">", "</span>.join(ds.keys()))</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"First two cities are: </span><span class="sc">{</span>ds[<span class="st">'City'</span>][:<span class="dv">2</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"First two populations are: </span><span class="sc">{</span>ds[<span class="st">'Population'</span>][:<span class="dv">2</span>]<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"First two latitudes are: </span><span class="sc">{</span>ds[<span class="st">'Latitude'</span>][:<span class="dv">2</span>]<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Columns are: City, Population, Latitude, Longitude
First two cities are: ['Perth', 'Armagh']
First two populations are: ['45770', '14777']
First two latitudes are: ['56.39583', '54.3499']</code></pre>
</div>
</div>
</section>
<section id="creating-a-package" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-package">Creating a Package</h2>
<p>We’re not going to tackle this now, but it’s important that you understand how what we’ve done connects to what we’re <em>about</em> to do, and the concept of a package is the bridge. We’ve already covered this in the pre-recorded lectures, but if you want to actually <em>try</em> to create your own package, the simplest way to do this is to:</p>
<ol type="1">
<li>Copy the <code>read_csv</code> into a new file called, for instance, <code>utils.py</code>.</li>
<li>Make sure you delete this function from the current ‘namespace’ (<code>del(read_csv)</code>) by which I mean that the <code>read_csv</code> function no longer exists (running <code>help(read_csv)</code> should give you an error!).</li>
<li>Try importing the function from the file: <code>from utils import read_csv</code> and run the <code>help(read_csv)</code> code again.</li>
</ol>
<p>Assuming that you’ve done everything correctly, we’ve now brought in code from another file without having to write it into our main Python script file. In Python, many of the most complex libraries are spread across the equivalent of <em>many</em> <code>utils.py</code> files, but on top of <em>that</em> when we import and run them they are also creating objects from classes defined in those files.</p>
<p>What we now want to do is use a fairly simple example using different ‘shapes’ (pyramids, cubes, etc.) that allow us to explore how classes work through inheritance from parents and can extend of overwrite the functionality provided by the parent class. We’ll need this understanding in order to grasp how Pandas and GeoPandas work specifically, but also how Python works more generally.</p>
</section>
</section>
<section id="classes-and-inheritance" class="level1">
<h1>Classes and Inheritance</h1>
<p>So, in the immortal words of Monty Python…</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/completely_different.png" class="img-fluid figure-img"></p>
<figcaption>And now for something completely different</figcaption>
</figure>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
🔗 Connections
</div>
</div>
<div class="callout-body-container callout-body">
<p>This will draw on what you’ve learned in the lectures about <a href="">Methods</a>, <a href="">Classes</a>, and <a href="">Design</a>. You will also find the Code Camp <a href="https://jreades.github.io/code-camp/lessons/Classes.html">Classes</a> session useful.</p>
</div>
</div>
<p>To repeat myself:</p>
<blockquote class="blockquote">
<p>In Python, many of the most complex libraries are spread across the equivalent of <em>many</em> <code>utils.py</code> files, but on top of <em>that</em> when we import and run them they are also creating objects from classes defined in those files.</p>
<p>What we now want to do is use a fairly simple example using different ‘shapes’ (pyramids, cubes, etc.) that allow us to explore how classes work through inheritance from parents and can extend of overwrite the functionality provided by the parent class. We’ll need this understanding in order to grasp how Pandas and GeoPandas work specifically, but also how Python works more generally.</p>
</blockquote>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-30-contents" aria-controls="callout-30" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Difficulty: 🤯.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-30" class="callout-30-contents callout-collapse collapse">
<div class="callout-body-container callout-body">

</div>
</div>
</div>
<p>We want to create a set of ‘shapes’ that allow us to calculate various properties of that shape:</p>
<ul>
<li>Diameter: which we’ll define as the longest line that can be drawn across the inside of the shape.</li>
<li>Volume: the total volume of the shape.</li>
<li>Surface Area: the total outside area of the shape.</li>
</ul>
<p>We will create all of these shape classes in the notebook so that we know they work and then will move them to an external package file so that they can be imported and re-used easily in other notebooks.</p>
<p>We’re also going to make use of a few features of Python:</p>
<ul>
<li>You can access the class name of an instance using: <code>self.__class__.__name__</code>. And here’s one key point: <code>self</code> refers to the specific instance (to <em>this</em> particular shape that I’ve created), not to the class in general (to <em>all</em> shapes of the same, er, shape)… we’ll see why this matters.</li>
<li>You can raise your own exceptions easily if you don’t want to implement a particular method yet. This is giving you control over how your code behaves when something goes ‘wrong’ – as we’ve covered elsewhere sometimes an error is ‘expected’ and we want to handle the <em>exception</em>, other times it is ‘unexpected’ and we’re going to let Python fail so that the user knows something is seriously wrong.</li>
<li>You can have an ‘abstract’ base class that does nothing except provide a template for the ‘real’ classes so that different types of shapes can be used interchangeably. This is quite an advanced feature, but it gives our script a lot more flexibility: we don’t need to worry about whether we’re working with a sphere, cube, or pyramid (or a spatial or non-spatial data set) because they are defined in a way that allows this flexibility.</li>
</ul>
<section id="abstract-base-class" class="level2">
<h2 class="anchored" data-anchor-id="abstract-base-class">Abstract Base Class</h2>
<p>This class appears to do very little, but there are two things to notice:</p>
<ol type="1">
<li>It provides a constructor (<code>__init__</code>) that sets the <code>shape_type</code> to the name of the class automatically (so a <code>square</code> object has <code>shape_type='Square'</code>) and it stores the critical dimension of the shape in <code>self.dim</code>.</li>
<li>It provides methods (which only raise exceptions) that will allow one shape to be used in the place of any other shape that inherits from <code>shape</code>.</li>
</ol>
<div id="c701ce8f" class="cell" data-execution_count="60">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Base class shape</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> shape(<span class="bu">object</span>): <span class="co"># Inherit from base class </span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dimension:<span class="bu">float</span><span class="op">=</span><span class="va">None</span>):</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.shape_type <span class="op">=</span> <span class="va">self</span>.__class__.<span class="va">__name__</span>.capitalize()</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.dim <span class="op">=</span> dimension</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Unimplmented method error."</span>)</span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Unimplmented method error."</span>)</span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">Exception</span>(<span class="st">"Unimplmented method error."</span>)</span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="bu">type</span>(<span class="va">self</span>):</span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span>(<span class="va">self</span>.shape_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can now create a new shape object (an <em>instance</em> of the shape class) but we can’t do much that is useful with it:</p>
<div id="a901d2f5" class="cell" data-execution_count="61">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> shape(<span class="dv">15</span>)</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: </span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"I am a </span><span class="sc">{</span>s<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"My volume is </span><span class="sc">{</span>s<span class="sc">.</span>volume()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I am a Shape
Error: Unimplmented method error.</code></pre>
</div>
</div>
</section>
<section id="cube" class="level2">
<h2 class="anchored" data-anchor-id="cube">Cube</h2>
<p>Implements a cube:</p>
<ol type="1">
<li>The diameter of the cube is given by the Pythagorean formula for the length of the hypotenuse in 3D between opposing corners: <span class="math inline">\(\sqrt{d^{2} + d^{2} + d^{2}}\)</span> which we can reduce to <span class="math inline">\(\sqrt{3 d^{2}}\)</span>.</li>
<li>A cube’s volume is given by <span class="math inline">\(d^{3}\)</span>.</li>
<li>A cube’s surface area will be the sum of its six faces: <span class="math inline">\(6d^{2}\)</span>.</li>
</ol>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<p>Can you work out the missing elements that will allow you to create a cube class?</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cube class</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> cube(shape): <span class="co"># Inherit from shape </span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dim:<span class="bu">float</span>):</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(dim)</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="dv">3</span> <span class="op">*</span> <span class="va">self</span>.??<span class="op">**</span><span class="dv">2</span>)<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">3</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ??<span class="op">*</span>(<span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a><span class="co"># If you've done everything correctly then</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a><span class="co"># you will no longer get an error here...</span></span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> cube(<span class="dv">15</span>)</span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: </span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"I am a </span><span class="sc">{</span>s<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"My volume is </span><span class="sc">{</span>s<span class="sc">.</span>volume()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cube class</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> cube(shape): <span class="co"># Inherit from shape</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dim:<span class="bu">float</span>):</span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(dim)</span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="dv">3</span> <span class="op">*</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span>)<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">3</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">6</span><span class="op">*</span>(<span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a><span class="co"># If you've done everything correctly then</span></span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true" tabindex="-1"></a><span class="co"># you will no longer get an error here...</span></span>
<span id="cb116-18"><a href="#cb116-18" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> cube(<span class="dv">15</span>)</span>
<span id="cb116-19"><a href="#cb116-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-20"><a href="#cb116-20" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: </span>
<span id="cb116-21"><a href="#cb116-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"I am a </span><span class="sc">{</span>s<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb116-22"><a href="#cb116-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"My volume is </span><span class="sc">{</span>s<span class="sc">.</span>volume()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb116-23"><a href="#cb116-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb116-24"><a href="#cb116-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>I am a Cube
My volume is 3375</code></pre>
</div>
</div>
</div>
</section>
<section id="sphere" class="level2">
<h2 class="anchored" data-anchor-id="sphere">Sphere</h2>
<p>Implements a sphere:</p>
<ol type="1">
<li>The diameter is twice the critical dimension (radius): <span class="math inline">\(2r\)</span>.</li>
<li>The volume is <span class="math inline">\(\frac{4}{3} \pi r^{3}\)</span>.</li>
<li>The surface area will be <span class="math inline">\(4 \pi r^{2}\)</span>.</li>
</ol>
<p>If we were writing something more general, we’d probably have spheres as a special case of an ellipsoid!</p>
<div class="tabset-margin-container"></div><div class="panel-tabset qna-question">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true">Question</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false">Answer</a></li></ul>
<div class="tab-content qna-question">
<div id="tabset-14-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<p>Can you work out the missing elements that will allow you to create a cube class?</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sphere class</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> pi</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> sphere(shape): <span class="co"># Inherit from shape</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dim:<span class="bu">float</span>):</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Something...</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Something...</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Something</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Something</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a><span class="co"># If you've done everything correctly then</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a><span class="co"># you will no longer get an error here...</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> sphere(<span class="dv">15</span>)</span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: </span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"I am a </span><span class="sc">{</span>s<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"My volume is </span><span class="sc">{</span>s<span class="sc">.</span>volume()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="tabset-14-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> math <span class="im">import</span> pi</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Sphere class</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> sphere(shape): <span class="co"># Inherit from shape</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dim:<span class="bu">float</span>):</span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(dim)</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.dim<span class="op">*</span><span class="dv">2</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="dv">4</span><span class="op">/</span><span class="dv">3</span>) <span class="op">*</span> pi <span class="op">*</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">3</span></span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">4</span> <span class="op">*</span> pi <span class="op">*</span> (<span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a><span class="co"># If you've done everything correctly then</span></span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a><span class="co"># you will no longer get an error here...</span></span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> sphere(<span class="dv">15</span>)</span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-21"><a href="#cb119-21" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>: </span>
<span id="cb119-22"><a href="#cb119-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"I am a </span><span class="sc">{</span>s<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb119-23"><a href="#cb119-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"My volume is </span><span class="sc">{</span>s<span class="sc">.</span>volume()<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb119-24"><a href="#cb119-24" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb119-25"><a href="#cb119-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Error: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>I am a Sphere
My volume is 14137.166941154068</code></pre>
</div>
</div>
</div>
</section>
<section id="regular-pyramid" class="level2">
<h2 class="anchored" data-anchor-id="regular-pyramid">Regular Pyramid</h2>
<p>We’re taking this to be a regular pyramid where all sides are equal:</p>
<ol type="1">
<li>The diameter is a line drawn across the base between opposing corners of the base so it’s just <span class="math inline">\(\sqrt{d^{2} + d^{2}}\)</span>.</li>
<li>The volume is given by <span class="math inline">\(V&nbsp;=&nbsp;b&nbsp;*&nbsp;h&nbsp;/&nbsp;3\)</span> (where <span class="math inline">\(b\)</span> is the area of the base, which in this case becomes <span class="math inline">\(d^{2} * h/3\)</span>).</li>
<li>The surface area will be the base + 4 equilateral triangles: <span class="math inline">\(d^{2} + 4 (d^{2}\sqrt{3}/4)\)</span> which we can reduce to <span class="math inline">\(d^{2} + d^{2}\sqrt{3}\)</span></li>
</ol>
<p>But this requires a <em>height</em> method that is specific to pyramids:</p>
<ol start="4" type="1">
<li>The height is taken from the centre of the pyramid (which will be half the length of the hypotenuse for two edges): <span class="math inline">\(l = \sqrt{d{^2} + d^{2}}\)</span> and the long side (<span class="math inline">\(d\)</span> again) which gives us <span class="math inline">\(\sqrt{l/2 + d^{2}}\)</span>.</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Class Variables
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that this has a <strong>class variable</strong> called <code>has_mummies</code> since Egyptian regular pyramids are plagued by them! This class variable is set automatically for <em>all</em> instances of the <code>pyramid</code> class. Changing this variable can have weird effects so they’re not <em>often</em> changed.</p>
</div>
</div>
<div id="aa4678b5" class="cell" data-execution_count="64">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pyramid class</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> pyramid(shape): <span class="co"># Inherit from shape</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>    has_mummies <span class="op">=</span> <span class="va">True</span> <span class="co"># This is for *all* regular pyramids</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dim:<span class="bu">float</span>):</span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(dim)</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.shape_type <span class="op">=</span> <span class="st">'Regular Pyramid'</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span>)<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> height(<span class="va">self</span>):</span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="va">self</span>.diameter()<span class="op">/</span><span class="dv">2</span> <span class="op">+</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span>)<span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span> <span class="op">*</span> <span class="va">self</span>.height() <span class="op">/</span> <span class="dv">3</span></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span> <span class="op">*</span> <span class="dv">3</span><span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="triangular-pyramid" class="level2">
<h2 class="anchored" data-anchor-id="triangular-pyramid">Triangular Pyramid</h2>
<p>We have chosen for triangular pyramid to <em>inherit</em> from regular pyramid. However, this is kind of a judgement call since there’s very little shared between the two types of pyramid and it’s arguable whether this one is actually simpler and should therefore be the parent class…</p>
<p>Just to note, as well, that since all sides are equal this is an <em>equilateral</em> triangular pyramid. Anyway, the calculations are:</p>
<ol type="1">
<li>The diameter (longest line through the shape) will just be the edge: <span class="math inline">\(d\)</span>.</li>
<li>The volume <span class="math inline">\(V = b * h / 3\)</span> where <span class="math inline">\(b\)</span> is the area of an equilateral triangle.</li>
<li>The surface area will be <span class="math inline">\(4b\)</span> where <span class="math inline">\(b\)</span> is the area of an equilateral triangle.</li>
</ol>
<p>So we now need two new formulas:</p>
<ol start="5" type="1">
<li>The height of the pyramid using (<a href="https://www.youtube.com/watch?v=ivF3ndmkMsE">Pythagoras again</a>): <span class="math inline">\(h = \sqrt{6}d/3\)</span>.</li>
<li>The area of an equilateral triangle: <span class="math inline">\(\frac{\sqrt{3}}{4} d^{2}\)</span></li>
</ol>
<p>Triangular pyramids do <em>not</em> have a problem with mummies.</p>
<p>Why don’t you add some documentation to this class and the regular pyramid class so that we know how to use them correctly?</p>
<div id="788ef2b1" class="cell" data-execution_count="65">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Triangular Pyramid class</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> t_pyramid(pyramid): <span class="co"># Inherit from regular pyramid</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>    has_mummies <span class="op">=</span> <span class="va">False</span> <span class="co"># This is for all triangular pyramids</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>, dim:<span class="bu">float</span>):</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>        <span class="bu">super</span>().<span class="fu">__init__</span>(dim)</span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>        <span class="va">self</span>.shape_type <span class="op">=</span> <span class="st">'Triangular Pyramid'</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> diameter(<span class="va">self</span>):</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">self</span>.dim</span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> height(<span class="va">self</span>):</span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>        <span class="co"># h = sqrt(6)/3 * d</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">6</span><span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)<span class="op">/</span><span class="dv">3</span> <span class="op">*</span> <span class="va">self</span>.dim</span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> base(<span class="va">self</span>):</span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">3</span><span class="op">**</span>(<span class="dv">1</span><span class="op">/</span><span class="dv">2</span>)<span class="op">/</span><span class="dv">4</span> <span class="op">*</span> <span class="va">self</span>.dim<span class="op">**</span><span class="dv">2</span></span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> volume(<span class="va">self</span>):</span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> (<span class="dv">1</span><span class="op">/</span><span class="dv">3</span>) <span class="op">*</span> <span class="va">self</span>.base() <span class="op">*</span> <span class="va">self</span>.height()</span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-24"><a href="#cb122-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">def</span> surface(<span class="va">self</span>):</span>
<span id="cb122-25"><a href="#cb122-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">4</span> <span class="op">*</span> <span class="va">self</span>.base()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="testing-your-classes" class="level2">
<h2 class="anchored" data-anchor-id="testing-your-classes">Testing Your Classes</h2>
<p>If you’ve implemented everything correctly then the following code should run.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co"># How would you test these changes?</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a>s <span class="op">=</span> sphere(<span class="dv">10</span>)</span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(s.<span class="bu">type</span>())</span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Volume is: </span><span class="sc">{</span>s<span class="sc">.</span>volume()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Diameter is: </span><span class="sc">{</span>s<span class="sc">.</span>diameter()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Surface Area is: </span><span class="sc">{</span>s<span class="sc">.</span>surface()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> cube(<span class="dv">10</span>)</span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(c.<span class="bu">type</span>())</span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Volume is: </span><span class="sc">{</span>c<span class="sc">.</span>volume()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Diameter is: </span><span class="sc">{</span>c<span class="sc">.</span>diameter()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Surface Area is: </span><span class="sc">{</span>c<span class="sc">.</span>surface()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a>p <span class="op">=</span> pyramid(<span class="dv">10</span>)</span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p.<span class="bu">type</span>())</span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Volume is: </span><span class="sc">{</span>p<span class="sc">.</span>volume()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Diameter is: </span><span class="sc">{</span>p<span class="sc">.</span>diameter()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-20"><a href="#cb123-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Surface Area is: </span><span class="sc">{</span>p<span class="sc">.</span>surface()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-21"><a href="#cb123-21" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Height is: </span><span class="sc">{</span>p<span class="sc">.</span>height()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-22"><a href="#cb123-22" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p.has_mummies <span class="kw">is</span> <span class="va">True</span>:</span>
<span id="cb123-23"><a href="#cb123-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\t</span><span class="st">Mummies? Aaaaaaaaargh!"</span>)</span>
<span id="cb123-24"><a href="#cb123-24" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb123-25"><a href="#cb123-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\t</span><span class="st">Phew, no mummies!"</span>)</span>
<span id="cb123-26"><a href="#cb123-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb123-27"><a href="#cb123-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-28"><a href="#cb123-28" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> t_pyramid(<span class="dv">10</span>)</span>
<span id="cb123-29"><a href="#cb123-29" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(p2.<span class="bu">type</span>())</span>
<span id="cb123-30"><a href="#cb123-30" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Volume is: </span><span class="sc">{</span>p2<span class="sc">.</span>volume()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-31"><a href="#cb123-31" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Diameter is: </span><span class="sc">{</span>p2<span class="sc">.</span>diameter()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-32"><a href="#cb123-32" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Surface Area is: </span><span class="sc">{</span>p2<span class="sc">.</span>surface()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-33"><a href="#cb123-33" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"</span><span class="ch">\t</span><span class="ss">Height is: </span><span class="sc">{</span>p2<span class="sc">.</span>height()<span class="sc">:5.2f}</span><span class="ss">"</span>)</span>
<span id="cb123-34"><a href="#cb123-34" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> p2.has_mummies <span class="kw">is</span> <span class="va">True</span>:</span>
<span id="cb123-35"><a href="#cb123-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\t</span><span class="st">Mummies?&nbsp;Aaaaaaaaargh!"</span>)</span>
<span id="cb123-36"><a href="#cb123-36" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb123-37"><a href="#cb123-37" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"</span><span class="ch">\t</span><span class="st">Phew,&nbsp;no&nbsp;mummies!"</span>)</span>
<span id="cb123-38"><a href="#cb123-38" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>)</span>
<span id="cb123-39"><a href="#cb123-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-40"><a href="#cb123-40" aria-hidden="true" tabindex="-1"></a><span class="co">#&nbsp;Useful&nbsp;demonstration&nbsp;of&nbsp;how&nbsp;to&nbsp;find&nbsp;out&nbsp;if&nbsp;a&nbsp;method&nbsp;or&nbsp;attribute&nbsp;is</span></span>
<span id="cb123-41"><a href="#cb123-41" aria-hidden="true" tabindex="-1"></a><span class="co">#&nbsp;associated&nbsp;with&nbsp;a&nbsp;particular&nbsp;object</span></span>
<span id="cb123-42"><a href="#cb123-42" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="bu">hasattr</span>(p2,<span class="st">'base_area'</span>):</span>
<span id="cb123-43"><a href="#cb123-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Shape&nbsp;of&nbsp;type '</span><span class="sc">{</span>p2<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">'&nbsp;has&nbsp;attribute&nbsp;or&nbsp;method&nbsp;'base_area'"</span>)</span>
<span id="cb123-44"><a href="#cb123-44" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb123-45"><a href="#cb123-45" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"Shape&nbsp;of&nbsp;type&nbsp;'</span><span class="sc">{</span>p2<span class="sc">.</span><span class="bu">type</span>()<span class="sc">}</span><span class="ss">'&nbsp;does&nbsp;*not*&nbsp;have&nbsp;attribute&nbsp;or&nbsp;method&nbsp;'base_area'"</span>)</span>
<span id="cb123-46"><a href="#cb123-46" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>I get the following output:</p>
<div id="0c2dd641" class="cell" data-execution_count="66">
<div class="cell-output cell-output-stdout">
<pre><code>Sphere
    Volume is: 4188.79
    Diameter is: 20.00
    Surface Area is: 1256.64

Cube
    Volume is: 1000.00
    Diameter is: 17.32
    Surface Area is: 600.00

Regular Pyramid
    Volume is: 344.92
    Diameter is: 14.14
    Surface Area is: 273.21
    Height is: 10.35
    Mummies? Aaaaaaaaargh!

Triangular Pyramid
    Volume is: 117.85
    Diameter is: 10.00
    Surface Area is: 173.21
    Height is:  8.16
    Phew,&nbsp;no&nbsp;mummies!

Shape&nbsp;of&nbsp;type&nbsp;'Triangular Pyramid'&nbsp;does&nbsp;*not*&nbsp;have&nbsp;attribute&nbsp;or&nbsp;method&nbsp;'base_area'
</code></pre>
</div>
</div>
</section>
<section id="packaging-it-up" class="level2">
<h2 class="anchored" data-anchor-id="packaging-it-up">Packaging It Up</h2>
<p>Wait, you’re <em>still</em> working on this practical and haven’t thrown up your hands in disgust yet? OK, in that case you can have <em>one</em> more thing to do: turn all the shapes into a package that can be loaded via an <code>import</code> statement.</p>
<section id="cell-magic" class="level3">
<h3 class="anchored" data-anchor-id="cell-magic">Cell Magic</h3>
<p>This code allows Jupyter to reload external libraries if they are edited after you import them. When you are working on your own packages this is rather useful since you tend to make a <em>lot</em> of mistakes when packaging code up this way and it’s handy not to have to restart the entire notebook every time you fix a typo or change a function.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>load_ext autoreload</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>autoreload <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="import-shapes" class="level3">
<h3 class="anchored" data-anchor-id="import-shapes">Import Shapes</h3>
<p>My suggestion is that you create a directory called <code>shapes</code> and copy all of the shape code (that’s the code for <code>shape</code>, <code>cube</code>, <code>sphere</code>, <code>pyramid</code>, <code>tpyramid</code>) into a file called <code>__init__.py</code> inside the <code>shapes</code> directory. You should then able to run the following:</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> s <span class="kw">in</span> [<span class="st">'shape'</span>,<span class="st">'sphere'</span>,<span class="st">'cube'</span>,<span class="st">'pyramid'</span>,<span class="st">'t_pyramid'</span>]:</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> s <span class="kw">in</span> <span class="bu">locals</span>():</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>        <span class="kw">del</span>(s)</span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapes <span class="im">import</span> <span class="op">*</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We need those first three lines of code to delete the existing classes from Python’s ‘memory’ so that we can be sure we’re importing the versions we saved to <code>shapes/__init__.py</code>.</p>
</section>
<section id="adding-documentation" class="level3">
<h3 class="anchored" data-anchor-id="adding-documentation">Adding Documentation</h3>
<p>In an ideal world, this would also be the time to properly document your classes and methods. Here as some examples that you could add to the <code>__init__.py</code> package file.</p>
<p>Underneath the line <code>class shape(object):</code>, add:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Abstract base class for all ideal shape classes.</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Keyword arguments:</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co">    dimension -- the principle dimension of the shape (default None)</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Underneath the line <code>def type(self):</code>, add:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a>        <span class="co">"""</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="co">        Returns the formatted name of the shape type. </span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co">        This is set automatically, but can be overwritten by setting the attribute shape_type.</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="co">        </span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="co">        :returns: the name of the class, so shapes.cube is a `Cube` shape type</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="co">        :rtype: str</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="co">        """</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This would then allow you to run:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapes <span class="im">import</span> <span class="op">*</span> <span class="co"># &lt;-- Change this if you didn't call your package `shapes`!</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(shape)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(shape.<span class="bu">type</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 2022–2023, Jon Reades</p>
</div>   
    <div class="nav-footer-center">
<p><img src="../img/favicon-16x16.png" class="height:10px img-fluid"> CASA Computing Environment</p>
<div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/jreades/jaipur/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jreades/jaipur">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://bsky.app/profile/casaucl.bsky.social">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>